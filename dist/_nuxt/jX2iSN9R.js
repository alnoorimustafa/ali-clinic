import{t as Ye,u as re,a as Ee,_ as Pe,b as ge,c as we,i as Xe,d as Ze,e as _e}from"./BfbsWhFc.js";import{m as ie,e as D,_ as Y,f as oe,g as H,r as F,h as se,i as de,j as Ue,n as et,k as O,l as Le,p as x,o as b,c as C,a as v,q as N,s as E,v as w,x as tt,y as st,z as nt,A as rt,d as ee,t as U,B as P,C as it,D as ot,F as G,E as Z,G as ne,b as _,H as W,I as he,J as Se,w as Ce,K as $,L as at}from"./Bz3t49yT.js";import"./pC6uPyoc.js";import"./DpnVmGoW.js";const lt={wrapper:"relative overflow-x-auto",base:"min-w-full table-fixed",divide:"divide-y divide-gray-300 dark:divide-gray-700",thead:"relative",tbody:"divide-y divide-gray-200 dark:divide-gray-800",caption:"sr-only",tr:{base:"",selected:"bg-gray-50 dark:bg-gray-800/50",expanded:"bg-gray-50 dark:bg-gray-800/50",active:"hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer"},th:{base:"text-left rtl:text-right",padding:"px-4 py-3.5",color:"text-gray-900 dark:text-white",font:"font-semibold",size:"text-sm"},td:{base:"whitespace-nowrap",padding:"px-4 py-4",color:"text-gray-500 dark:text-gray-400",font:"",size:"text-sm"},checkbox:{padding:"ps-4"},loadingState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4 animate-spin"},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},expand:{icon:"transform transition-transform duration-200"},progress:{wrapper:"absolute inset-x-0 -bottom-[0.5px] p-0"},default:{sortAscIcon:"i-heroicons-bars-arrow-up-20-solid",sortDescIcon:"i-heroicons-bars-arrow-down-20-solid",sortButton:{icon:"i-heroicons-arrows-up-down-20-solid",trailing:!0,square:!0,color:"gray",variant:"ghost",class:"-m-1.5"},expandButton:{icon:"i-heroicons-chevron-down",color:"gray",variant:"ghost",size:"xs",class:"-my-1.5 align-middle"},checkbox:{color:"primary"},progress:{color:"primary",animation:"carousel"},loadingState:{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."},emptyState:{icon:"i-heroicons-circle-stack-20-solid",label:"No items."}}},ut={wrapper:"w-full flex flex-col gap-2",indicator:{container:{base:"flex flex-row justify-end",width:"min-w-fit",transition:"transition-all"},align:"text-end",width:"w-fit",color:"text-gray-400 dark:text-gray-500",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base","2xl":"text-base"}},progress:{base:"block appearance-none border-none overflow-hidden",width:"w-full [&::-webkit-progress-bar]:w-full",size:{"2xs":"h-px",xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-3",xl:"h-4","2xl":"h-5"},rounded:"rounded-full [&::-webkit-progress-bar]:rounded-full",track:"[&::-webkit-progress-bar]:bg-gray-200 [&::-webkit-progress-bar]:dark:bg-gray-700 [@supports(selector(&::-moz-progress-bar))]:bg-gray-200 [@supports(selector(&::-moz-progress-bar))]:dark:bg-gray-700",bar:"[&::-webkit-progress-value]:rounded-full [&::-webkit-progress-value]:transition-all [&::-webkit-progress-value]:ease-in-out [&::-moz-progress-bar]:rounded-full",color:"text-{color}-500 dark:text-{color}-400",background:"[&::-webkit-progress-value]:bg-current [&::-moz-progress-bar]:bg-current",indeterminate:{base:"indeterminate:relative",rounded:"indeterminate:after:rounded-full [&:indeterminate::-webkit-progress-value]:rounded-full [&:indeterminate::-moz-progress-bar]:rounded-full"}},steps:{base:"grid grid-cols-1",color:"text-{color}-500 dark:text-{color}-400",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base","2xl":"text-base"}},step:{base:"transition-all opacity-0 truncate row-start-1 col-start-1",align:"text-end",active:"opacity-100",first:"text-gray-500 dark:text-gray-400"},animation:{carousel:"bar-animation-carousel","carousel-inverse":"bar-animation-carousel-inverse",swing:"bar-animation-swing",elastic:"bar-animation-elastic"},default:{color:"primary",size:"md",animation:"carousel"}},ct={wrapper:"relative flex items-start",container:"flex items-center h-5",base:"h-4 w-4 dark:checked:bg-current dark:checked:border-transparent dark:indeterminate:bg-current dark:indeterminate:border-transparent disabled:opacity-50 disabled:cursor-not-allowed focus:ring-0 focus:ring-transparent focus:ring-offset-transparent",form:"form-checkbox",rounded:"rounded",color:"text-{color}-500 dark:text-{color}-400",background:"bg-white dark:bg-gray-900",border:"border border-gray-300 dark:border-gray-700",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",inner:"ms-3 flex flex-col",label:"text-sm font-medium text-gray-700 dark:text-gray-200",required:"text-sm text-red-500 dark:text-red-400",help:"text-sm text-gray-500 dark:text-gray-400",default:{color:"primary"}},V=ie(D.ui.strategy,D.ui.textarea,Ye),dt=oe({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},maxrows:{type:Number,default:0},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(s){return Object.keys(V.size).includes(s)}},color:{type:String,default:()=>V.default.color,validator(s){return[...D.ui.colors,...Object.keys(V.color)].includes(s)}},variant:{type:String,default:()=>V.default.variant,validator(s){return[...Object.keys(V.variant),...Object.values(V.color).flatMap(e=>Object.keys(e))].includes(s)}},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(s,{emit:e}){const{ui:t,attrs:n}=re("textarea",H(s,"ui"),V,H(s,"class")),{emitFormBlur:r,emitFormInput:o,inputId:i,color:a,size:l,name:g}=Ee(s,V),u=F(se({},s.modelModifiers,{trim:!1,lazy:!1,number:!1,nullify:!1})),d=F(null),f=()=>{var m;s.autofocus&&((m=d.value)==null||m.focus())},k=()=>{if(s.autoresize){if(!d.value)return;d.value.rows=s.rows;const m=d.value.style.overflow;d.value.style.overflow="hidden";const R=window.getComputedStyle(d.value),j=Number.parseInt(R.paddingTop),A=Number.parseInt(R.paddingBottom),B=j+A,ae=Number.parseInt(R.lineHeight),{scrollHeight:le}=d.value,X=(le-B)/ae;X>s.rows&&(d.value.rows=s.maxrows?Math.min(X,s.maxrows):X),d.value.style.overflow=m}},h=m=>{u.value.trim&&(m=m.trim()),u.value.number&&(m=tt(m)),u.value.nullify&&(m||(m=null)),e("update:modelValue",m),o()},c=m=>{k(),u.value.lazy||h(m.target.value)},q=m=>{const R=m.target.value;e("change",R),u.value.lazy&&h(R),u.value.trim&&(m.target.value=R.trim())},S=m=>{e("blur",m),r()};de(()=>{setTimeout(()=>{f()},s.autofocusDelay)}),Ue(()=>s.modelValue,()=>{et(k)}),de(()=>{setTimeout(()=>{f(),k()},100)});const I=O(()=>{var R,j;const m=((j=(R=t.value.color)==null?void 0:R[a.value])==null?void 0:j[s.variant])||t.value.variant[s.variant];return Le(x(t.value.base,t.value.form,t.value.rounded,t.value.placeholder,t.value.size[l.value],s.padded?t.value.padding[l.value]:"p-0",m==null?void 0:m.replaceAll("{color}",a.value),!s.resize&&"resize-none"),s.textareaClass)});return{ui:t,attrs:n,name:g,inputId:i,textarea:d,textareaClass:I,onInput:c,onChange:q,onBlur:S}}}),ht=["id","value","name","rows","required","disabled","placeholder"];function pt(s,e,t,n,r,o){return b(),C("div",{class:w(s.ui.wrapper)},[v("textarea",N({id:s.inputId,ref:"textarea",value:s.modelValue,name:s.name,rows:s.rows,required:s.required,disabled:s.disabled,placeholder:s.placeholder,class:s.textareaClass},s.attrs,{onInput:e[0]||(e[0]=(...i)=>s.onInput&&s.onInput(...i)),onBlur:e[1]||(e[1]=(...i)=>s.onBlur&&s.onBlur(...i)),onChange:e[2]||(e[2]=(...i)=>s.onChange&&s.onChange(...i))}),null,16,ht),E(s.$slots,"default")],2)}const ft=Y(dt,[["render",pt]]),gt=st,ke=ie(D.ui.strategy,D.ui.checkbox,ct),mt=oe({inheritAttrs:!1,props:{id:{type:String,default:()=>null},value:{type:[String,Number,Boolean,Object],default:null},modelValue:{type:[Boolean,Array],default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:void 0},help:{type:String,default:null},label:{type:String,default:null},required:{type:Boolean,default:!1},color:{type:String,default:()=>ke.default.color,validator(s){return D.ui.colors.includes(s)}},inputClass:{type:String,default:""},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(s,{emit:e}){const{ui:t,attrs:n}=re("checkbox",H(s,"ui"),ke,H(s,"class")),{emitFormChange:r,color:o,name:i,inputId:a}=Ee(s),l=a.value??gt(),g=O({get(){return s.modelValue},set(f){e("update:modelValue",f)}}),u=f=>{e("change",f.target.checked),r()},d=O(()=>Le(x(t.value.base,t.value.form,t.value.rounded,t.value.background,t.value.border,o.value&&t.value.ring.replaceAll("{color}",o.value),o.value&&t.value.color.replaceAll("{color}",o.value)),s.inputClass));return{ui:t,attrs:n,toggle:g,inputId:l,name:i,inputClass:d,onChange:u}}}),bt=["data-n-ids"],yt=["id","name","required","value","disabled","indeterminate"],vt=["for"];function wt(s,e,t,n,r,o){return b(),C("div",{class:w(s.ui.wrapper),"data-n-ids":s.attrs["data-n-ids"]},[v("div",{class:w(s.ui.container)},[nt(v("input",N({id:s.inputId,"onUpdate:modelValue":e[0]||(e[0]=i=>s.toggle=i),name:s.name,required:s.required,value:s.value,disabled:s.disabled,indeterminate:s.indeterminate,type:"checkbox",class:s.inputClass},s.attrs,{onChange:e[1]||(e[1]=(...i)=>s.onChange&&s.onChange(...i))}),null,16,yt),[[rt,s.toggle]])],2),s.label||s.$slots.label?(b(),C("div",{key:0,class:w(s.ui.inner)},[v("label",{for:s.inputId,class:w(s.ui.label)},[E(s.$slots,"label",{label:s.label},()=>[ee(U(s.label),1)]),s.required?(b(),C("span",{key:0,class:w(s.ui.required)},"*",2)):P("",!0)],10,vt),s.help||s.$slots.help?(b(),C("p",{key:0,class:w(s.ui.help)},[E(s.$slots,"help",{help:s.help},()=>[ee(U(s.help),1)])],2)):P("",!0)],2)):P("",!0)],10,bt)}const $e=Y(mt,[["render",wt]]),J=ie(D.ui.strategy,D.ui.progress,ut),St=oe({inheritAttrs:!1,props:{value:{type:Number,default:null},max:{type:[Number,Array],default:100},indicator:{type:Boolean,default:!1},animation:{type:String,default:()=>J.default.animation,validator(s){return Object.keys(J.animation).includes(s)}},size:{type:String,default:()=>J.default.size,validator(s){return Object.keys(J.progress.size).includes(s)}},color:{type:String,default:()=>J.default.color,validator(s){return D.ui.colors.includes(s)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(s){const{ui:e,attrs:t}=re("progress",H(s,"ui"),J,H(s,"class")),n=O(()=>x(e.value.indicator.container.base,e.value.indicator.container.width,e.value.indicator.container.transition)),r=O(()=>x(e.value.indicator.align,e.value.indicator.width,e.value.indicator.color,e.value.indicator.size[s.size])),o=O(()=>{var I;const S=[e.value.progress.base,e.value.progress.width,e.value.progress.size[s.size],e.value.progress.rounded,e.value.progress.track,e.value.progress.bar,(I=e.value.progress.color)==null?void 0:I.replaceAll("{color}",s.color),e.value.progress.background,e.value.progress.indeterminate.base,e.value.progress.indeterminate.rounded];return k.value&&S.push(e.value.animation[s.animation]),x(...S)}),i=O(()=>{var S;return x(e.value.steps.base,(S=e.value.steps.color)==null?void 0:S.replaceAll("{color}",s.color),e.value.steps.size[s.size])}),a=O(()=>x(e.value.step.base,e.value.step.align)),l=O(()=>x(e.value.step.active)),g=O(()=>x(e.value.step.first));function u(S){return S===Number(s.value)}function d(S){return S===0}function f(S){S=Number(S);const I=[a.value];return d(S)&&I.push(g.value),u(S)&&I.push(l.value),I.join(" ")}const k=O(()=>s.value===void 0||s.value===null),h=O(()=>Array.isArray(s.max)),c=O(()=>k.value?null:Array.isArray(s.max)?s.max.length-1:Number(s.max)),q=O(()=>{if(!k.value)switch(!0){case s.value<0:return 0;case s.value>c.value:return 100;default:return s.value/c.value*100}});return{ui:e,attrs:t,indicatorContainerClass:n,indicatorClass:r,progressClass:o,stepsClass:i,stepClasses:f,isIndeterminate:k,isSteps:h,realMax:c,percent:q}}}),Ct=["aria-valuemax","aria-valuenow"];function kt(s,e,t,n,r,o){return b(),C("div",{class:w(s.ui.wrapper),role:"progressbar"},[s.indicator||s.$slots.indicator?E(s.$slots,"indicator",ot(N({key:0},{percent:s.percent})),()=>[s.isSteps?P("",!0):(b(),C("div",{key:0,class:w(s.indicatorContainerClass),style:it({width:`${s.percent}%`})},[v("div",{class:w(s.indicatorClass)},U(Math.round(s.percent))+"% ",3)],6))],!0):P("",!0),v("progress",N({"aria-valuemax":s.realMax,"aria-valuenow":s.value,class:s.progressClass},{value:s.value,max:s.realMax,...s.attrs}),U(s.percent!==void 0?`${Math.round(s.percent)}%`:void 0),17,Ct),s.isSteps?(b(),C("div",{key:1,class:w(s.stepsClass)},[(b(!0),C(G,null,Z(s.max,(i,a)=>(b(),C("div",{key:a,class:w(s.stepClasses(a))},[E(s.$slots,`step-${a}`,N({ref_for:!0},{step:i}),()=>[ee(U(i),1)],!0)],2))),128))],2)):P("",!0)],2)}const Ne=Y(St,[["render",kt],["__scopeId","data-v-7e6e4781"]]);function Ot(s){return s?s[0].toUpperCase()+s.slice(1):""}const M=ie(D.ui.strategy,D.ui.table,lt);function It(s,e){return Xe(s,e)}function Oe(s,e,t){return s===e?0:t==="asc"?s<e?-1:1:s>e?-1:1}function Ie(s){return new Set(s.map(e=>JSON.stringify(e)))}function Rt(s){return e=>ne(e,s)}const At=oe({components:{UIcon:Pe,UButton:ge,UProgress:Ne,UCheckbox:$e},inheritAttrs:!1,props:{modelValue:{type:Array,default:null},by:{type:[String,Function],default:()=>It},rows:{type:Array,default:()=>[]},columns:{type:Array,default:null},columnAttribute:{type:String,default:"label"},sort:{type:Object,default:()=>({})},sortMode:{type:String,default:"auto"},sortButton:{type:Object,default:()=>M.default.sortButton},sortAscIcon:{type:String,default:()=>M.default.sortAscIcon},sortDescIcon:{type:String,default:()=>M.default.sortDescIcon},expandButton:{type:Object,default:()=>M.default.expandButton},expand:{type:Object,default:()=>null},loading:{type:Boolean,default:!1},loadingState:{type:Object,default:()=>M.default.loadingState},emptyState:{type:Object,default:()=>M.default.emptyState},caption:{type:String,default:null},progress:{type:Object,default:()=>M.default.progress},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},multipleExpand:{type:Boolean,default:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue","update:sort","update:expand","select:all"],setup(s,{emit:e,attrs:t}){const{ui:n,attrs:r}=re("table",H(s,"ui"),M,H(s,"class")),o=O(()=>s.columns??Object.keys(s.rows[0]??{}).map(p=>({key:p,label:Ot(p),sortable:!1,class:void 0,sort:Oe}))),i=we(s,"sort",e,{passive:!0,defaultValue:se({},s.sort,{column:null,direction:"asc"})}),a=we(s,"expand",e,{passive:!0,defaultValue:se({},s.expand,{openedRows:[],row:null})}),l=F(null),g={column:i.value.column,direction:null},u=O(()=>{var T;if(!((T=i.value)!=null&&T.column)||s.sortMode==="manual")return s.rows;const{column:p,direction:y}=i.value;return s.rows.slice().sort((ue,He)=>{var ve;const Je=ne(ue,p),Ge=ne(He,p);return(((ve=o.value.find(Qe=>Qe.key===p))==null?void 0:ve.sort)??Oe)(Je,Ge,y)})}),d=O({get(){return s.modelValue},set(p){e("update:modelValue",p)}}),f=O(()=>s.rows.length),k=O(()=>{const p=Ie(d.value),y=Ie(s.rows);return Array.from(p).filter(T=>y.has(T)).length}),h=O(()=>!d.value||!s.rows?!1:k.value>0&&k.value<f.value),c=O(()=>k.value===f.value),q=O(()=>s.emptyState===null?null:{...n.value.default.emptyState,...s.emptyState}),S=O(()=>s.loadingState===null?null:{...n.value.default.loadingState,...s.loadingState});function I(p,y){if(typeof s.by=="string"){const T=Rt(s.by);return T(p)===T(y)}return s.by(p,y)}function m(p){return s.modelValue?d.value.some(y=>I(Se(y),Se(p))):!1}function R(p){if(i.value.column===p.key){const y=!p.direction||p.direction==="asc"?"desc":"asc";i.value.direction===y?i.value=se({},g,{column:null,direction:"asc"}):i.value={column:i.value.column,direction:i.value.direction==="asc"?"desc":"asc"}}else i.value={column:p.key,direction:p.direction||"asc"}}function j(p){const y=window.getSelection();y&&y.toString().length>0||t.onSelect&&t.onSelect(p)}function A(p,y){t.onContextmenu&&t.onContextmenu(p,y)}function B(){const p=[...d.value];s.rows.forEach(y=>{m(y)||p.push(y)}),d.value=p}function ae(p){p?B():d.value=[],e("select:all",p)}function le(p,y){if(p)d.value=s.singleSelect?[y]:[...d.value,y];else{const T=d.value.findIndex(ue=>I(ue,y));d.value.splice(T,1)}}function X(p,y,T=""){return ne(p,y,T)}function ye(p){var y;return(y=a.value)!=null&&y.openedRows?a.value.openedRows.some(T=>I(T,p)):!1}function Me(p,y){return s.columns?p===0&&!s.columns.find(T=>T.key===y):p===0}function Ke(p){a.value={openedRows:ye(p)?a.value.openedRows.filter(y=>!I(y,p)):s.multipleExpand?[...a.value.openedRows,p]:[p],row:p}}function We(p){if(p.sortable){if(i.value.column!==p.key)return"none";if(i.value.direction==="asc")return"ascending";if(i.value.direction==="desc")return"descending"}}return Ue(u,()=>{l.value=new Date},{deep:!0}),{ui:n,attrs:r,sort:i,columns:o,rows:u,selected:d,indeterminate:h,emptyState:q,loadingState:S,isAllRowChecked:c,onChangeCheckbox:le,isSelected:m,onSort:R,onSelect:j,onContextmenu:A,onChange:ae,getRowData:X,toggleOpened:Ke,getAriaSort:We,isExpanded:ye,shouldRenderColumnInFirstPlace:Me,retriggerSlot:l}}}),jt=["aria-sort"],Tt={key:1},qt={key:0},Et={key:0},Pt=["colspan"],Ut={key:1},Lt=["colspan"],$t=["onClick","onContextmenu"],Nt={key:0},Dt={colspan:"100%"};function Bt(s,e,t,n,r,o){const i=$e,a=ge,l=Ne,g=Pe;return b(),C("div",N({class:s.ui.wrapper},s.attrs),[v("table",{class:w([s.ui.base,s.ui.divide])},[s.$slots.caption||s.caption?E(s.$slots,"caption",{key:0},()=>[v("caption",{class:w(s.ui.caption)},U(s.caption),3)]):P("",!0),v("thead",{class:w(s.ui.thead)},[v("tr",{class:w(s.ui.tr.base)},[s.expand?(b(),C("th",{key:0,scope:"col",class:w(s.ui.tr.base)},e[0]||(e[0]=[v("span",{class:"sr-only"},"Expand",-1)]),2)):P("",!0),(b(!0),C(G,null,Z(s.columns,(u,d)=>(b(),C("th",{key:d,scope:"col",class:w([s.ui.th.base,s.ui.th.padding,s.ui.th.color,s.ui.th.font,s.ui.th.size,u.key==="select"&&s.ui.checkbox.padding,u.class]),"aria-sort":s.getAriaSort(u)},[!s.singleSelect&&s.modelValue&&(u.key==="select"||s.shouldRenderColumnInFirstPlace(d,"select"))?E(s.$slots,"select-header",{key:0,indeterminate:s.indeterminate,checked:s.isAllRowChecked,change:s.onChange},()=>[_(i,N({"model-value":s.isAllRowChecked,indeterminate:s.indeterminate,ref_for:!0},s.ui.default.checkbox,{"aria-label":"Select all",onChange:s.onChange}),null,16,["model-value","indeterminate","onChange"])]):E(s.$slots,`${u.key}-header`,{key:1,column:u,sort:s.sort,onSort:s.onSort},()=>[u.sortable?(b(),W(a,N({key:0,ref_for:!0},{...s.ui.default.sortButton||{},...s.sortButton},{icon:!s.sort.column||s.sort.column!==u.key?s.sortButton.icon||s.ui.default.sortButton.icon:s.sort.direction==="asc"?s.sortAscIcon:s.sortDescIcon,label:u[s.columnAttribute],onClick:f=>s.onSort(u)}),null,16,["icon","label","onClick"])):(b(),C("span",Tt,U(u[s.columnAttribute]),1))])],10,jt))),128))],2),s.loading&&s.progress?(b(),C("tr",qt,[v("td",{colspan:0,class:w(s.ui.progress.wrapper)},[_(l,N({...s.ui.default.progress||{},...s.progress},{size:"2xs"}),null,16)],2)])):P("",!0)],2),v("tbody",{class:w(s.ui.tbody)},[s.loadingState&&s.loading&&!s.rows.length?(b(),C("tr",Et,[v("td",{colspan:s.columns.length+(s.modelValue?1:0)+(s.expand?1:0)},[E(s.$slots,"loading-state",{},()=>[v("div",{class:w(s.ui.loadingState.wrapper)},[s.loadingState.icon?(b(),W(g,{key:0,name:s.loadingState.icon,class:w(s.ui.loadingState.icon),"aria-hidden":"true"},null,8,["name","class"])):P("",!0),v("p",{class:w(s.ui.loadingState.label)},U(s.loadingState.label),3)],2)])],8,Pt)])):s.emptyState&&!s.rows.length?(b(),C("tr",Ut,[v("td",{colspan:s.columns.length+(s.modelValue?1:0)+(s.expand?1:0)},[E(s.$slots,"empty-state",{},()=>[v("div",{class:w(s.ui.emptyState.wrapper)},[s.emptyState.icon?(b(),W(g,{key:0,name:s.emptyState.icon,class:w(s.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):P("",!0),v("p",{class:w(s.ui.emptyState.label)},U(s.emptyState.label),3)],2)])],8,Lt)])):(b(!0),C(G,{key:2},Z(s.rows,(u,d)=>(b(),C(G,{key:d},[v("tr",{class:w([s.ui.tr.base,s.isSelected(u)&&s.ui.tr.selected,s.isExpanded(u)&&s.ui.tr.expanded,s.$attrs.onSelect&&s.ui.tr.active,u==null?void 0:u.class]),onClick:()=>s.onSelect(u),onContextmenu:f=>s.onContextmenu(f,u)},[s.expand?(b(),C("td",{key:0,class:w([s.ui.td.base,s.ui.td.padding,s.ui.td.color,s.ui.td.font,s.ui.td.size])},[s.$slots["expand-action"]?E(s.$slots,"expand-action",{key:0,row:u,isExpanded:s.isExpanded(u),toggle:()=>s.toggleOpened(u)}):(b(),W(a,N({key:1,disabled:u.disabledExpand,ref_for:!0},{...s.ui.default.expandButton||{},...s.expandButton},{ui:{icon:{base:[s.ui.expand.icon,s.isExpanded(u)&&"rotate-180"].join(" ")}},onClickCapture:he(f=>s.toggleOpened(u),["stop"])}),null,16,["disabled","ui","onClickCapture"]))],2)):P("",!0),(b(!0),C(G,null,Z(s.columns,(f,k)=>{var h;return b(),C("td",{key:k,class:w([s.ui.td.base,s.ui.td.padding,s.ui.td.color,s.ui.td.font,s.ui.td.size,f==null?void 0:f.rowClass,(h=u[f.key])==null?void 0:h.class,f.key==="select"&&s.ui.checkbox.padding])},[s.modelValue&&(f.key==="select"||s.shouldRenderColumnInFirstPlace(k,"select"))?E(s.$slots,"select-data",{key:0,checked:s.isSelected(u),change:c=>s.onChangeCheckbox(c,u)},()=>[_(i,N({"model-value":s.isSelected(u),ref_for:!0},s.ui.default.checkbox,{"aria-label":"Select row",onChange:c=>s.onChangeCheckbox(c,u),onClickCapture:he(()=>s.onSelect(u),["stop"])}),null,16,["model-value","onChange","onClickCapture"])]):E(s.$slots,`${f.key}-data`,{key:s.retriggerSlot,column:f,row:u,index:d,getRowData:c=>s.getRowData(u,f.key,c)},()=>[ee(U(s.getRowData(u,f.key)),1)])],2)}),128))],42,$t),s.isExpanded(u)?(b(),C("tr",Nt,[v("td",Dt,[E(s.$slots,"expand",{row:u,index:d})])])):P("",!0)],64))),128))],2)],2)],16)}const xt=Y(At,[["render",Bt]]);class L extends Error{constructor(e){var t,n,r,o;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,L.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof L||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(o=(r=(n=this.originalError)==null?void 0:n.cause)==null?void 0:r.message)!=null&&o.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const te=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Ft(s,e){const t={};if(typeof s!="string")return t;const n=Object.assign({},{}).decode||zt;let r=0;for(;r<s.length;){const o=s.indexOf("=",r);if(o===-1)break;let i=s.indexOf(";",r);if(i===-1)i=s.length;else if(i<o){r=s.lastIndexOf(";",o-1)+1;continue}const a=s.slice(r,o).trim();if(t[a]===void 0){let l=s.slice(o+1,i).trim();l.charCodeAt(0)===34&&(l=l.slice(1,-1));try{t[a]=n(l)}catch{t[a]=l}}r=i+1}return t}function Re(s,e,t){const n=Object.assign({},t||{}),r=n.encode||Vt;if(!te.test(s))throw new TypeError("argument name is invalid");const o=r(e);if(o&&!te.test(o))throw new TypeError("argument val is invalid");let i=s+"="+o;if(n.maxAge!=null){const a=n.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(a)}if(n.domain){if(!te.test(n.domain))throw new TypeError("option domain is invalid");i+="; Domain="+n.domain}if(n.path){if(!te.test(n.path))throw new TypeError("option path is invalid");i+="; Path="+n.path}if(n.expires){if(!function(l){return Object.prototype.toString.call(l)==="[object Date]"||l instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i}function zt(s){return s.indexOf("%")!==-1?decodeURIComponent(s):s}function Vt(s){return encodeURIComponent(s)}const Mt=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let De;function Q(s){if(s)try{const e=decodeURIComponent(De(s.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function Be(s,e=0){let t=Q(s);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}De=typeof atob!="function"||Mt?s=>{let e=String(s).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,r=0,o=0,i="";n=e.charAt(o++);~n&&(t=r%4?64*t+n:n,r++%4)?i+=String.fromCharCode(255&t>>(-2*r&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i}:atob;const Ae="pb_auth";class me{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!Be(this.token)}get isSuperuser(){var t,n;let e=Q(this.token);return e.type=="auth"&&(((t=this.record)==null?void 0:t.collectionName)=="_superusers"||!((n=this.record)!=null&&n.collectionName)&&e.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),Q(this.token).type=="auth"&&!this.isSuperuser}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=Ae){const n=Ft(e||"")[t]||"";let r={};try{r=JSON.parse(n),(typeof r===null||typeof r!="object"||Array.isArray(r))&&(r={})}catch{}this.save(r.token||"",r.record||r.model||null)}exportToCookie(e,t=Ae){var l,g;const n={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},r=Q(this.token);n.expires=r!=null&&r.exp?new Date(1e3*r.exp):new Date("1970-01-01"),e=Object.assign({},n,e);const o={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let i=Re(t,JSON.stringify(o),e);const a=typeof Blob<"u"?new Blob([i]).size:i.length;if(o.record&&a>4096){o.record={id:(l=o.record)==null?void 0:l.id,email:(g=o.record)==null?void 0:g.email};const u=["collectionId","collectionName","verified"];for(const d in this.record)u.includes(d)&&(o.record[d]=this.record[d]);i=Re(t,JSON.stringify(o),e)}return i}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class Kt extends me{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.record||t.model||null)})}}class z{constructor(e){this.client=e}}class Wt extends z{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}async testEmail(e,t,n,r){return r=Object.assign({method:"POST",body:{email:t,template:n,collection:e}},r),this.client.send("/api/settings/test/email",r).then(()=>!0)}async generateAppleClientSecret(e,t,n,r,o,i){return i=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:r,duration:o}},i),this.client.send("/api/settings/apple/generate-client-secret",i)}}const Ht=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function be(s){if(s){s.query=s.query||{};for(let e in s)Ht.includes(e)||(s.query[e]=s[e],delete s[e])}}function xe(s){const e=[];for(const t in s){if(s[t]===null)continue;const n=s[t],r=encodeURIComponent(t);if(Array.isArray(n))for(const o of n)e.push(r+"="+encodeURIComponent(o));else n instanceof Date?e.push(r+"="+encodeURIComponent(n.toISOString())):typeof n!==null&&typeof n=="object"?e.push(r+"="+encodeURIComponent(JSON.stringify(n))):e.push(r+"="+encodeURIComponent(n))}return e.join("&")}class Fe extends z{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,n){var i;if(!e)throw new Error("topic must be set.");let r=e;if(n){be(n=Object.assign({},n));const a="options="+encodeURIComponent(JSON.stringify({query:n.query,headers:n.headers}));r+=(r.includes("?")?"&":"?")+a}const o=function(a){const l=a;let g;try{g=JSON.parse(l==null?void 0:l.data)}catch{}t(g||{})};return this.subscriptions[r]||(this.subscriptions[r]=[]),this.subscriptions[r].push(o),this.isConnected?this.subscriptions[r].length===1?await this.submitSubscriptions():(i=this.eventSource)==null||i.addEventListener(r,o):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,o)}async unsubscribe(e){var n;let t=!1;if(e){const r=this.getSubscriptionsByTopic(e);for(let o in r)if(this.hasSubscriptionListeners(o)){for(let i of this.subscriptions[o])(n=this.eventSource)==null||n.removeEventListener(o,i);delete this.subscriptions[o],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var n;let t=!1;for(let r in this.subscriptions)if((r+"?").startsWith(e)){t=!0;for(let o of this.subscriptions[r])(n=this.eventSource)==null||n.removeEventListener(r,o);delete this.subscriptions[r]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var o;let n=!1;const r=this.getSubscriptionsByTopic(e);for(let i in r){if(!Array.isArray(this.subscriptions[i])||!this.subscriptions[i].length)continue;let a=!1;for(let l=this.subscriptions[i].length-1;l>=0;l--)this.subscriptions[i][l]===t&&(a=!0,delete this.subscriptions[i][l],this.subscriptions[i].splice(l,1),(o=this.eventSource)==null||o.removeEventListener(i,t));a&&(this.subscriptions[i].length||delete this.subscriptions[i],n||this.hasSubscriptionListeners(i)||(n=!0))}this.hasSubscriptionListeners()?n&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let r in this.subscriptions)if((n=this.subscriptions[r])!=null&&n.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let n in this.subscriptions)(n+"?").startsWith(e)&&(t[n]=this.subscriptions[n]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,await this.submitSubscriptions()}).then(()=>{for(let r of this.pendingConnects)r.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const n=this.getSubscriptionsByTopic("PB_CONNECT");for(let r in n)for(let o of n[r])o(e)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new L(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class ze extends z{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}async getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(r=>{var o;return r.items=((o=r.items)==null?void 0:o.map(i=>this.decode(i)))||[],r})}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var r;if(!((r=n==null?void 0:n.items)!=null&&r.length))throw new L({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}async getOne(e,t){if(!e)throw new L({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}async update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(r=>this.decode(r))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],r=async o=>this.getList(o,e||500,t).then(i=>{const a=i.items;return n=n.concat(a),a.length==i.perPage?r(o+1):n});return r(1)}}function K(s,e,t,n){const r=n!==void 0;return r||t!==void 0?r?(console.warn(s),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):Object.assign(e,t):e}function ce(s){var e;(e=s._resetAutoRefresh)==null||e.call(s)}class Jt extends ze{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}async subscribe(e,t,n){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,n)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}async getList(e=1,t=30,n){return super.getList(e,t,n)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,n){return super.update(e,t,n).then(r=>{var o,i,a;if(((o=this.client.authStore.record)==null?void 0:o.id)===(r==null?void 0:r.id)&&(((i=this.client.authStore.record)==null?void 0:i.collectionId)===this.collectionIdOrName||((a=this.client.authStore.record)==null?void 0:a.collectionName)===this.collectionIdOrName)){let l=Object.assign({},this.client.authStore.record.expand),g=Object.assign({},this.client.authStore.record,r);l&&(g.expand=Object.assign(l,r.expand)),this.client.authStore.save(this.client.authStore.token,g)}return r})}async delete(e,t){return super.delete(e,t).then(n=>{var r,o,i;return!n||((r=this.client.authStore.record)==null?void 0:r.id)!==e||((o=this.client.authStore.record)==null?void 0:o.collectionId)!==this.collectionIdOrName&&((i=this.client.authStore.record)==null?void 0:i.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e)}async authWithPassword(e,t,n){let r;n=Object.assign({method:"POST",body:{identity:e,password:t}},n),this.isSuperusers&&(r=n.autoRefreshThreshold,delete n.autoRefreshThreshold,n.autoRefresh||ce(this.client));let o=await this.client.send(this.baseCollectionPath+"/auth-with-password",n);return o=this.authResponse(o),r&&this.isSuperusers&&function(a,l,g,u){ce(a);const d=a.beforeSend,f=a.authStore.record,k=a.authStore.onChange((h,c)=>{(!h||(c==null?void 0:c.id)!=(f==null?void 0:f.id)||(c!=null&&c.collectionId||f!=null&&f.collectionId)&&(c==null?void 0:c.collectionId)!=(f==null?void 0:f.collectionId))&&ce(a)});a._resetAutoRefresh=function(){k(),a.beforeSend=d,delete a._resetAutoRefresh},a.beforeSend=async(h,c)=>{var m;const q=a.authStore.token;if((m=c.query)!=null&&m.autoRefresh)return d?d(h,c):{url:h,sendOptions:c};let S=a.authStore.isValid;if(S&&Be(a.authStore.token,l))try{await g()}catch{S=!1}S||await u();const I=c.headers||{};for(let R in I)if(R.toLowerCase()=="authorization"&&q==I[R]&&a.authStore.token){I[R]=a.authStore.token;break}return c.headers=I,d?d(h,c):{url:h,sendOptions:c}}}(this.client,r,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},n))),o}async authWithOAuth2Code(e,t,n,r,o,i,a){let l={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectURL:r,createData:o}};return l=K("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",l,i,a),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",l).then(g=>this.authResponse(g))}authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{};let n=null;t.urlCallback||(n=je(void 0));const r=new Fe(this.client);function o(){n==null||n.close(),r.unsubscribe()}const i={},a=t.requestKey;return a&&(i.requestKey=a),this.listAuthMethods(i).then(l=>{var f;const g=l.oauth2.providers.find(k=>k.name===t.provider);if(!g)throw new L(new Error(`Missing or invalid provider "${t.provider}".`));const u=this.client.buildURL("/api/oauth2-redirect"),d=a?(f=this.client.cancelControllers)==null?void 0:f[a]:void 0;return d&&(d.signal.onabort=()=>{o()}),new Promise(async(k,h)=>{var c;try{await r.subscribe("@oauth2",async m=>{var j;const R=r.clientId;try{if(!m.state||R!==m.state)throw new Error("State parameters don't match.");if(m.error||!m.code)throw new Error("OAuth2 redirect error or missing code: "+m.error);const A=Object.assign({},t);delete A.provider,delete A.scopes,delete A.createData,delete A.urlCallback,(j=d==null?void 0:d.signal)!=null&&j.onabort&&(d.signal.onabort=null);const B=await this.authWithOAuth2Code(g.name,m.code,g.codeVerifier,u,t.createData,A);k(B)}catch(A){h(new L(A))}o()});const q={state:r.clientId};(c=t.scopes)!=null&&c.length&&(q.scope=t.scopes.join(" "));const S=this._replaceQueryParams(g.authURL+u,q);await(t.urlCallback||function(m){n?n.location.href=m:n=je(m)})(S)}catch(q){o(),h(new L(q))}})}).catch(l=>{throw o(),l})}async authRefresh(e,t){let n={method:"POST"};return n=K("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(r=>this.authResponse(r))}async requestPasswordReset(e,t,n){let r={method:"POST",body:{email:e}};return r=K("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",r,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",r).then(()=>!0)}async confirmPasswordReset(e,t,n,r,o){let i={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return i=K("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",i,r,o),this.client.send(this.baseCollectionPath+"/confirm-password-reset",i).then(()=>!0)}async requestVerification(e,t,n){let r={method:"POST",body:{email:e}};return r=K("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",r,t,n),this.client.send(this.baseCollectionPath+"/request-verification",r).then(()=>!0)}async confirmVerification(e,t,n){let r={method:"POST",body:{token:e}};return r=K("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",r,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",r).then(()=>{const o=Q(e),i=this.client.authStore.record;return i&&!i.verified&&i.id===o.id&&i.collectionId===o.collectionId&&(i.verified=!0,this.client.authStore.save(this.client.authStore.token,i)),!0})}async requestEmailChange(e,t,n){let r={method:"POST",body:{newEmail:e}};return r=K("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",r,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",r).then(()=>!0)}async confirmEmailChange(e,t,n,r){let o={method:"POST",body:{token:e,password:t}};return o=K("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",o,n,r),this.client.send(this.baseCollectionPath+"/confirm-email-change",o).then(()=>{const i=Q(e),a=this.client.authStore.record;return a&&a.id===i.id&&a.collectionId===i.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(e,t){return this.client.collection("_externalAuths").getFullList(Object.assign({},t,{filter:this.client.filter("recordRef = {:id}",{id:e})}))}async unlinkExternalAuth(e,t,n){const r=await this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:e,provider:t}));return this.client.collection("_externalAuths").delete(r.id,n).then(()=>!0)}async requestOTP(e,t){return t=Object.assign({method:"POST",body:{email:e}},t),this.client.send(this.baseCollectionPath+"/request-otp",t)}async authWithOTP(e,t,n){return n=Object.assign({method:"POST",body:{otpId:e,password:t}},n),this.client.send(this.baseCollectionPath+"/auth-with-otp",n).then(r=>this.authResponse(r))}async impersonate(e,t,n){(n=Object.assign({method:"POST",body:{duration:t}},n)).headers=n.headers||{},n.headers.Authorization||(n.headers.Authorization=this.client.authStore.token);const r=new Ve(this.client.baseURL,new me,this.client.lang),o=await r.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(e),n);return r.authStore.save(o==null?void 0:o.token,this.decode((o==null?void 0:o.record)||{})),r}_replaceQueryParams(e,t={}){let n=e,r="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),r=e.substring(e.indexOf("?")+1));const o={},i=r.split("&");for(const a of i){if(a=="")continue;const l=a.split("=");o[decodeURIComponent(l[0].replace(/\+/g," "))]=decodeURIComponent((l[1]||"").replace(/\+/g," "))}for(let a in t)t.hasOwnProperty(a)&&(t[a]==null?delete o[a]:o[a]=t[a]);r="";for(let a in o)o.hasOwnProperty(a)&&(r!=""&&(r+="&"),r+=encodeURIComponent(a.replace(/%20/g,"+"))+"="+encodeURIComponent(o[a].replace(/%20/g,"+")));return r!=""?n+"?"+r:n}}function je(s){if(typeof window>"u"||!(window!=null&&window.open))throw new L(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,r=window.innerHeight;e=e>n?n:e,t=t>r?r:t;let o=n/2-e/2,i=r/2-t/2;return window.open(s,"popup_window","width="+e+",height="+t+",top="+i+",left="+o+",resizable,menubar=no")}class Gt extends ze{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,n){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)}async getScaffolds(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/meta/scaffolds",e)}async truncate(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/truncate",t).then(()=>!0)}}class Qt extends z{async getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs",n)}async getOne(e,t){if(!e)throw new L({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class Yt extends z{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Xt extends z{getUrl(e,t,n={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(e,t,n)}getURL(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const r=[];r.push("api"),r.push("files"),r.push(encodeURIComponent(e.collectionId||e.collectionName)),r.push(encodeURIComponent(e.id)),r.push(encodeURIComponent(t));let o=this.client.buildURL(r.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const i=new URLSearchParams(n);o+=(o.includes("?")?"&":"?")+i}return o}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Zt extends z{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class _t extends z{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/crons",e)}async run(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/crons/${encodeURIComponent(e)}`,t).then(()=>!0)}}function pe(s){return typeof Blob<"u"&&s instanceof Blob||typeof File<"u"&&s instanceof File||s!==null&&typeof s=="object"&&s.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function fe(s){return s&&(s.constructor.name==="FormData"||typeof FormData<"u"&&s instanceof FormData)}function Te(s){for(const e in s){const t=Array.isArray(s[e])?s[e]:[s[e]];for(const n of t)if(pe(n))return!0}return!1}const es=/^[\-\.\d]+$/;function qe(s){if(typeof s!="string")return s;if(s=="true")return!0;if(s=="false")return!1;if((s[0]==="-"||s[0]>="0"&&s[0]<="9")&&es.test(s)){let e=+s;if(""+e===s)return e}return s}class ts extends z{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new ss(this.requests,e)),this.subs[e]}async send(e){const t=new FormData,n=[];for(let r=0;r<this.requests.length;r++){const o=this.requests[r];if(n.push({method:o.method,url:o.url,headers:o.headers,body:o.json}),o.files)for(let i in o.files){const a=o.files[i]||[];for(let l of a)t.append("requests."+r+"."+i,l)}}return t.append("@jsonPayload",JSON.stringify({requests:n})),e=Object.assign({method:"POST",body:t},e),this.client.send("/api/batch",e)}}class ss{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);const n={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(n,t),this.requests.push(n)}create(e,t){t=Object.assign({body:e||{}},t);const n={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(n,t),this.requests.push(n)}update(e,t,n){n=Object.assign({body:t||{}},n);const r={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(r,n),this.requests.push(r)}delete(e,t){t=Object.assign({},t);const n={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(n,t),this.requests.push(n)}prepareRequest(e,t){if(be(t),e.headers=t.headers,e.json={},e.files={},t.query!==void 0){const r=xe(t.query);r&&(e.url+=(e.url.includes("?")?"&":"?")+r)}let n=t.body;fe(n)&&(n=function(o){let i={};return o.forEach((a,l)=>{if(l==="@jsonPayload"&&typeof a=="string")try{let g=JSON.parse(a);Object.assign(i,g)}catch(g){console.warn("@jsonPayload error:",g)}else i[l]!==void 0?(Array.isArray(i[l])||(i[l]=[i[l]]),i[l].push(qe(a))):i[l]=qe(a)}),i}(n));for(const r in n){const o=n[r];if(pe(o))e.files[r]=e.files[r]||[],e.files[r].push(o);else if(Array.isArray(o)){const i=[],a=[];for(const l of o)pe(l)?i.push(l):a.push(l);if(i.length>0&&i.length==o.length){e.files[r]=e.files[r]||[];for(let l of i)e.files[r].push(l)}else if(e.json[r]=a,i.length>0){let l=r;r.startsWith("+")||r.endsWith("+")||(l+="+"),e.files[l]=e.files[l]||[];for(let g of i)e.files[l].push(g)}}else e.json[r]=o}}}class Ve{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=n,t?this.authStore=t:typeof window<"u"&&window.Deno?this.authStore=new me:this.authStore=new Kt,this.collections=new Gt(this),this.files=new Xt(this),this.logs=new Qt(this),this.settings=new Wt(this),this.realtime=new Fe(this),this.health=new Yt(this),this.backups=new Zt(this),this.crons=new _t(this)}get admins(){return this.collection("_superusers")}createBatch(){return new ts(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Jt(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let n in t){let r=t[n];switch(typeof r){case"boolean":case"number":r=""+r;break;case"string":r="'"+r.replace(/'/g,"\\'")+"'";break;default:r=r===null?"null":r instanceof Date?"'"+r.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(r).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+n+"}",r)}return e}getFileUrl(e,t,n={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(e,t,n)}buildUrl(e){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(e)}buildURL(e){var n;let t=this.baseURL;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(n=window.location.origin)!=null&&n.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseURL),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let n=this.buildURL(e);if(this.beforeSend){const r=Object.assign({},await this.beforeSend(n,t));r.url!==void 0||r.options!==void 0?(n=r.url||n,t=r.options||t):Object.keys(r).length&&(t=r,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const r=xe(t.query);r&&(n+=(n.includes("?")?"&":"?")+r),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(async r=>{let o={};try{o=await r.json()}catch{}if(this.afterSend&&(o=await this.afterSend(r,o,t)),r.status>=400)throw new L({url:r.url,status:r.status,data:o});return o}).catch(r=>{throw new L(r)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=function(r){if(typeof FormData>"u"||r===void 0||typeof r!="object"||r===null||fe(r)||!Te(r))return r;const o=new FormData;for(const i in r){const a=r[i];if(typeof a!="object"||Te({data:a})){const l=Array.isArray(a)?a:[a];for(let g of l)o.append(i,g)}else{let l={};l[i]=a,o.append("@jsonPayload",JSON.stringify(l))}}return o}(t.body),be(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||fe(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const r=new AbortController;this.cancelControllers[n]=r,t.signal=r.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}}const ns={class:"my-10"},rs={class:"grid grid-cols-3 gap-6"},is={class:"col-span-1 max-w-lg"},os={class:"text-xl font-semibold mb-4"},as=["for"],ls={key:0,class:"text-red-500 mb-4"},us=["disabled"],cs={class:"col-span-2"},ds={__name:"CreateDrug",setup(s){const e=new Ve("https://mcq-db.dakakean.com"),t=F([]),n=F({id:null,brand:null,name:null,frequency:null,dose:null,when:null,duration:null,note:null}),r=F([]),o=F(!1),i=F(!1),a=F(""),l=()=>{n.value={id:null,brand:null,name:null,frequency:null,dose:null,when:null,duration:null,note:null},o.value=!1,t.value=[]},g=h=>h?h.split(`
`).filter(c=>c.trim()!==""):"",u=async()=>{try{const h=await e.collection("drugs").getFullList();r.value=h.map(c=>({id:c.id||"",name:c.name||"",brand:c.brand||"",frequency:c.frequency||"",dose:c.dose||"",when:c.when||"",duration:c.duration||"",note:c.note||""}))}catch(h){console.error("Error fetching drugs:",h)}},d=async()=>{i.value=!0,a.value="",console.log(n.value);const h={name:n.value.name,brand:g(n.value.brand),frequency:g(n.value.frequency),dose:g(n.value.dose),when:g(n.value.when),duration:g(n.value.duration),note:g(n.value.note)};try{o.value?(await e.collection("drugs").update(n.value.id,h),console.log("Drug updated successfully.")):(await e.collection("drugs").create(h),console.log("Drug created successfully.")),l(),u()}catch(c){console.error("Error saving drug:",c),a.value=c.message||"Failed to save drug."}finally{i.value=!1}},f=h=>h?Array.isArray(h)?h.map(c=>c.trim()).join(`
`):typeof h=="string"?h.includes(",")?h.split(",").map(c=>c.trim()).join(`
`):h.trim():String(h):"",k=h=>{console.log(h),t.value.length===1?(o.value=!1,l()):(o.value=!0,n.value={id:h.id||"",name:f(h.name),brand:f(h.brand),frequency:f(h.frequency),dose:f(h.dose),when:f(h.when),duration:f(h.duration),note:f(h.note)})};return de(u),(h,c)=>{const q=ge,S=ft,I=Ze,m=xt,R=_e;return b(),W(R,{class:"my-10"},{default:Ce(()=>[v("div",ns,[_(q,{to:"/"},{default:Ce(()=>c[1]||(c[1]=[ee("back")])),_:1})]),v("div",rs,[v("div",is,[v("h1",os,U($(o)?"Edit Drug":"Add New Drug"),1),v("form",{onSubmit:he(d,["prevent"])},[(b(),C(G,null,Z({name:"Name",brand:"Brand",frequency:"Frequency",dose:"Dose",when:"When to Take",duration:"Duration",note:"Note"},(j,A)=>v("div",{key:A,class:"form-group mb-4"},[v("label",{for:A,class:"block mb-2 text-sm font-medium text-gray-700"},U(j),9,as),A!=="name"?(b(),W(S,{key:0,autoresize:"",modelValue:$(n)[A],"onUpdate:modelValue":B=>$(n)[A]=B,id:A,class:"textarea",placeholder:`Enter ${j.toLowerCase()} (one per line)`},null,8,["modelValue","onUpdate:modelValue","id","placeholder"])):(b(),W(I,{key:1,modelValue:$(n)[A],"onUpdate:modelValue":B=>$(n)[A]=B,id:A,type:"text",class:"input",placeholder:`Enter ${j.toLowerCase()}`,required:""},null,8,["modelValue","onUpdate:modelValue","id","placeholder"]))])),64)),$(a)?(b(),C("div",ls,U($(a)),1)):P("",!0),v("button",{type:"submit",class:"btn btn-primary",disabled:$(i)},U($(i)?"Submitting...":$(o)?"Update Drug":"Create Drug"),9,us)],32)]),v("div",cs,[_(m,{modelValue:$(t),"onUpdate:modelValue":c[0]||(c[0]=j=>at(t)?t.value=j:null),rows:$(r),class:"w-full border rounded","single-select":!0,onSelect:k},null,8,["modelValue","rows"])])])]),_:1})}}},hs=Y(ds,[["__scopeId","data-v-13ac3d0b"]]),ps={};function fs(s,e){const t=hs;return b(),W(t)}const ws=Y(ps,[["render",fs]]);export{ws as default};
