import{_ as ae,u as ne,b as se,d as pe,e as me}from"./BoTH_XqH.js";import{_ as re,a as ce,f as ve,b as ye,c as be}from"./C6BnL6kh.js";import{m as ie,e as P,_ as Q,f as de,g as J,k as z,l as fe,p as E,o as t,c as i,a as l,v as k,F as w,s as q,t as m,H as f,q as D,B as A,E as K,b as r,M as he,r as g,y as ge,N as _e,D as N,d as j,O as Ve,w as F,K as $,L}from"./C8G0TVwt.js";import"./IsXIO1_-.js";import"./CtWpyhHZ.js";const ke={wrapper:"",inner:"",label:{wrapper:"flex content-center items-center justify-between",base:"block font-medium text-gray-700 dark:text-gray-200",required:"after:content-['*'] after:ms-0.5 after:text-red-500 dark:after:text-red-400"},size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base"},container:"mt-1 relative",description:"text-gray-500 dark:text-gray-400",hint:"text-gray-500 dark:text-gray-400",help:"mt-2 text-gray-500 dark:text-gray-400",error:"mt-2 text-red-500 dark:text-red-400",default:{size:"sm"}},$e={wrapper:{base:"flex items-center align-center text-center",horizontal:"w-full flex-row",vertical:"flex-col"},container:{base:"font-medium text-gray-700 dark:text-gray-200 flex",horizontal:"mx-3 whitespace-nowrap",vertical:"my-2"},border:{base:"flex border-gray-200 dark:border-gray-800",horizontal:"w-full",vertical:"h-full",size:{horizontal:{"2xs":"border-t",xs:"border-t-[2px]",sm:"border-t-[3px]",md:"border-t-[4px]",lg:"border-t-[5px]",xl:"border-t-[6px]"},vertical:{"2xs":"border-s",xs:"border-s-[2px]",sm:"border-s-[3px]",md:"border-s-[4px]",lg:"border-s-[5px]",xl:"border-s-[6px]"}},type:{solid:"border-solid",dotted:"border-dotted",dashed:"border-dashed"}},icon:{base:"flex-shrink-0 w-5 h-5"},avatar:{base:"flex-shrink-0",size:"2xs"},label:"text-sm",default:{size:"2xs",type:"solid"}},I=ie(P.ui.strategy,P.ui.divider,$e),we=de({components:{UIcon:ae,UAvatar:re},inheritAttrs:!1,props:{label:{type:String,default:null},icon:{type:String,default:null},avatar:{type:Object,default:null},size:{type:String,default:()=>I.default.size,validator(e){return Object.keys(I.border.size.horizontal).includes(e)||Object.keys(I.border.size.vertical).includes(e)}},orientation:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},type:{type:String,default:()=>I.default.type,validator:e=>["solid","dotted","dashed"].includes(e)},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:n,attrs:b}=ne("divider",J(e,"ui"),I),a=z(()=>fe(E(n.value.wrapper.base,n.value.wrapper[e.orientation]),e.class)),p=z(()=>E(n.value.container.base,n.value.container[e.orientation])),c=z(()=>E(n.value.border.base,n.value.border[e.orientation],n.value.border.size[e.orientation][e.size],n.value.border.type[e.type]));return{ui:n,attrs:b,wrapperClass:a,containerClass:p,borderClass:c}}});function Ue(e,n,b,a,p,c){const _=ae,s=re;return t(),i("div",D({class:e.wrapperClass},e.attrs),[l("div",{class:k(e.borderClass)},null,2),e.label||e.icon||e.avatar||e.$slots.default?(t(),i(w,{key:0},[l("div",{class:k(e.containerClass)},[q(e.$slots,"default",{},()=>[e.label?(t(),i("span",{key:0,class:k(e.ui.label)},m(e.label),3)):e.icon?(t(),f(_,{key:1,name:e.icon,class:k(e.ui.icon.base)},null,8,["name","class"])):e.avatar?(t(),f(s,D({key:2},{size:e.ui.avatar.size,...e.avatar},{class:e.ui.avatar.base}),null,16,["class"])):A("",!0)])],2),l("div",{class:k(e.borderClass)},null,2)],64)):A("",!0)],16)}const ue=Q(we,[["render",Ue]]),De={class:"mt-8 flow-root"},ze={class:"-mx-4 -my-2 sm:-mx-6 lg:-mx-8"},Ce={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},qe={class:"shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},Se={class:"min-w-full divide-y divide-gray-300 header-table"},Be={class:"bg-gray-50"},Ne={class:"min-w-full row-table"},je={class:"bg-white mainTable"},Ae=["onClick"],Fe={class:"py-2 pl-2 text-sm font-medium text-gray-900"},Ie={class:"py-2 pl-2 text-sm font-medium text-gray-900"},Oe={class:"py-2 pl-2 text-sm font-medium text-gray-900"},Me={class:"py-2 pl-2 text-sm font-medium text-gray-900"},Pe={class:"py-2 pl-2 text-sm font-medium text-gray-900"},xe={class:"py-2 pl-2 text-sm font-medium text-gray-900"},Te={class:"py-2 pl-2 text-sm font-medium text-gray-900"},Ge={class:""},We={colspan:"6",class:"notes-row p-1"},Re={class:"text-sm text-right"},Ee={__name:"DrugTable",props:{drugs:{type:Array,required:!0},header:{type:Array,required:!0}},emits:["deleteDrug"],setup(e,{emit:n}){const b=n,a=p=>{b("deleteDrug",p)};return(p,c)=>{const _=ue;return t(),i("div",De,[l("div",ze,[l("div",Ce,[l("div",qe,[l("table",Se,[l("thead",Be,[l("tr",null,[(t(!0),i(w,null,K(e.header,s=>(t(),i("th",{key:s,scope:"col",class:"py-4 pl-2 pr-3 text-sm font-medium text-gray-900"},[l("span",null,m(s),1)]))),128))])])]),(t(!0),i(w,null,K(e.drugs,(s,v)=>(t(),i("div",{key:s.name},[r(_,{size:"sm"}),l("table",Ne,[l("tbody",je,[l("tr",{onClick:y=>a(v),class:"cursor-pointer"},[l("td",Fe,m(v+1),1),l("td",Ie,[l("span",null,m(s.name),1)]),l("td",Oe,[l("span",null,m(s.brand),1)]),l("td",Me,[l("span",null,m(s.dose),1)]),l("td",Pe,[l("span",null,m(s.when),1)]),l("td",xe,[l("span",null,m(s.frequency),1)]),l("td",Te,[l("span",null,m(s.duration),1)])],8,Ae),l("tr",Ge,[l("td",We,[l("div",Re,m(s.notes),1)])])])])]))),128))])])])])}}},H=ie(P.ui.strategy,P.ui.formGroup,ke),Le=de({inheritAttrs:!1,props:{name:{type:String,default:null},size:{type:String,default:null,validator(e){return Object.keys(H.size).includes(e)}},label:{type:String,default:null},description:{type:String,default:null},required:{type:Boolean,default:!1},help:{type:String,default:null},error:{type:[String,Boolean],default:null},hint:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},eagerValidation:{type:Boolean,default:!1}},setup(e){const{ui:n,attrs:b}=ne("formGroup",J(e,"ui"),H,J(e,"class")),a=he("form-errors",null),p=z(()=>{var s,v;return e.error&&typeof e.error=="string"||typeof e.error=="boolean"?e.error:(v=(s=a==null?void 0:a.value)==null?void 0:s.find(y=>y.path===e.name))==null?void 0:v.message}),c=z(()=>n.value.size[e.size??H.default.size]),_=g(ge());return _e("form-group",{error:p,inputId:_,name:z(()=>e.name),size:z(()=>e.size),eagerValidation:z(()=>e.eagerValidation)}),{ui:n,attrs:b,inputId:_,size:c,error:p}}}),He=["for"];function Je(e,n,b,a,p,c){return t(),i("div",D({class:e.ui.wrapper},e.attrs),[l("div",{class:k(e.ui.inner)},[e.label||e.$slots.label?(t(),i("div",{key:0,class:k([e.ui.label.wrapper,e.size])},[l("label",{for:e.inputId,class:k([e.ui.label.base,e.required?e.ui.label.required:""])},[e.$slots.label?q(e.$slots,"label",N(D({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(t(),i(w,{key:1},[j(m(e.label),1)],64))],10,He),e.hint||e.$slots.hint?(t(),i("span",{key:0,class:k([e.ui.hint])},[e.$slots.hint?q(e.$slots,"hint",N(D({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(t(),i(w,{key:1},[j(m(e.hint),1)],64))],2)):A("",!0)],2)):A("",!0),e.description||e.$slots.description?(t(),i("p",{key:1,class:k([e.ui.description,e.size])},[e.$slots.description?q(e.$slots,"description",N(D({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(t(),i(w,{key:1},[j(m(e.description),1)],64))],2)):A("",!0)],2),l("div",{class:k([e.label?e.ui.container:""])},[q(e.$slots,"default",N(Ve({error:e.error}))),typeof e.error=="string"&&e.error?(t(),i("p",{key:0,class:k([e.ui.error,e.size])},[e.$slots.error?q(e.$slots,"error",N(D({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(t(),i(w,{key:1},[j(m(e.error),1)],64))],2)):e.help||e.$slots.help?(t(),i("p",{key:1,class:k([e.ui.help,e.size])},[e.$slots.help?q(e.$slots,"help",N(D({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(t(),i(w,{key:1},[j(m(e.help),1)],64))],2)):A("",!0)],2)],16)}const Ke=Q(Le,[["render",Je]]),Qe={class:"flex mb-4 w-full justify-between"},Xe={class:"ml-2"},Ye={class:"ml-2"},Ze={class:"ml-2"},el={class:"ml-2"},ll={class:"ml-2"},tl={class:"mb-4"},ol={class:"flex mb-4 w-full justify-between"},al={class:"ml-2"},nl={class:"ml-2"},sl={class:"ml-2"},rl={class:"ml-2"},il={class:"ml-2"},dl={class:"mb-4"},ul={__name:"DrugForm",emits:["add-drug","update-drug"],setup(e,{emit:n}){const b=n,a=g(null),p=g(null),c=g(null),_=g(null),s=g(null),v=g(null),y=g(null),U=g(null),S=g([]),B=g(!1),O=()=>{const V={name:a.value.name,brand:c.value,dose:_.value,when:s.value,frequency:v.value,duration:y.value,notes:U.value,options:{...a.value}};S.value.push(V),b("add-drug",V),W()},x=V=>{const d=S.value[V];b("update-drug",d)},T=V=>{S.value.splice(V,1)},G=async V=>{a.value=V,c.value=null,_.value=null,s.value=null,v.value=null,y.value=null,U.value=null},W=()=>{a.value=null,p.value=null,c.value=null,_.value=null,s.value=null,v.value=null,y.value=null,U.value=null};async function C(V){B.value=!0;try{const d=await $fetch(`https://mcq-db.dakakean.com/api/collections/drugs/records?filter=name~"${V}"&expand=doses,frequency`);return B.value=!1,d.items}catch(d){console.error(d),B.value=!1}}return(V,d)=>{const u=ce,R=se,X=Ke;return t(),f(X,{label:"New Drug"},{default:F(()=>[l("div",Qe,[l("div",null,[r(u,{search:C,loading:B.value,placeholder:"Search for a drug",trailing:"",by:"id",onChange:G,modelValue:p.value,"onUpdate:modelValue":d[0]||(d[0]=o=>p.value=o),"option-attribute":"name"},null,8,["loading","modelValue"])]),l("div",Xe,[a.value?(t(),f(u,{key:0,nullable:!0,placeholder:"Brand",modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=o=>c.value=o),options:a.value.brand},null,8,["modelValue","options"])):(t(),f(u,{key:1,placeholder:"Brand",disabled:""}))]),l("div",Ye,[a.value?(t(),f(u,{key:0,nullable:!0,placeholder:"Dose",modelValue:_.value,"onUpdate:modelValue":d[2]||(d[2]=o=>_.value=o),options:a.value.dose},null,8,["modelValue","options"])):(t(),f(u,{key:1,placeholder:"Dose",disabled:""}))]),l("div",Ze,[a.value?(t(),f(u,{key:0,nullable:!0,placeholder:"When",modelValue:s.value,"onUpdate:modelValue":d[3]||(d[3]=o=>s.value=o),options:a.value.when},null,8,["modelValue","options"])):(t(),f(u,{key:1,placeholder:"When",disabled:""}))]),l("div",el,[a.value?(t(),f(u,{key:0,nullable:!0,placeholder:"Frequency",modelValue:v.value,"onUpdate:modelValue":d[4]||(d[4]=o=>v.value=o),options:a.value.frequency},null,8,["modelValue","options"])):(t(),f(u,{key:1,placeholder:"Frequency",disabled:""}))]),l("div",ll,[a.value?(t(),f(u,{key:0,nullable:!0,placeholder:"Duration",modelValue:y.value,"onUpdate:modelValue":d[5]||(d[5]=o=>y.value=o),options:a.value.duration},null,8,["modelValue","options"])):(t(),f(u,{key:1,placeholder:"Duration",disabled:""}))])]),l("div",tl,[a.value?(t(),f(u,{key:0,nullable:!0,placeholder:"Note",modelValue:U.value,"onUpdate:modelValue":d[6]||(d[6]=o=>U.value=o),options:a.value.note},null,8,["modelValue","options"])):(t(),f(u,{key:1,placeholder:"Note",disabled:""}))]),l("div",null,[r(R,{class:"w-auto",label:"Add",color:"primary",onClick:O})]),(t(!0),i(w,null,K(S.value,(o,M)=>(t(),i("div",{key:M,class:"mt-6"},[r(X,{label:`Drug ${M+1}`},{default:F(()=>{var Y,Z,ee,le,te,oe;return[l("div",ol,[l("div",null,[r(u,{placeholder:"Name",modelValue:o.name,"onUpdate:modelValue":h=>o.name=h,disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]),l("div",al,[r(u,{placeholder:"Brand",modelValue:o.brand,"onUpdate:modelValue":h=>o.brand=h,options:((Y=o.options)==null?void 0:Y.brand)||[]},null,8,["modelValue","onUpdate:modelValue","options"])]),l("div",nl,[r(u,{placeholder:"Dose",modelValue:o.dose,"onUpdate:modelValue":h=>o.dose=h,options:((Z=o.options)==null?void 0:Z.dose)||[]},null,8,["modelValue","onUpdate:modelValue","options"])]),l("div",sl,[r(u,{placeholder:"When",modelValue:o.when,"onUpdate:modelValue":h=>o.when=h,options:((ee=o.options)==null?void 0:ee.when)||[]},null,8,["modelValue","onUpdate:modelValue","options"])]),l("div",rl,[r(u,{placeholder:"Frequency",modelValue:o.frequency,"onUpdate:modelValue":h=>o.frequency=h,options:((le=o.options)==null?void 0:le.frequency)||[]},null,8,["modelValue","onUpdate:modelValue","options"])]),l("div",il,[r(u,{placeholder:"Duration",modelValue:o.duration,"onUpdate:modelValue":h=>o.duration=h,options:((te=o.options)==null?void 0:te.duration)||[]},null,8,["modelValue","onUpdate:modelValue","options"])])]),l("div",dl,[r(u,{placeholder:"Note",modelValue:o.notes,"onUpdate:modelValue":h=>o.notes=h,options:((oe=o.options)==null?void 0:oe.note)||[]},null,8,["modelValue","onUpdate:modelValue","options"])]),l("div",null,[r(R,{class:"w-auto",label:"Update",color:"primary",onClick:h=>x(M)},null,8,["onClick"]),r(R,{class:"w-auto",label:"Remove",color:"danger",onClick:h=>T(M)},null,8,["onClick"])])]}),_:2},1032,["label"])]))),128))]),_:1})}}},pl={class:"print my-10"},ml={class:"flex flex-row justify-between gap-4 mb-10 text-right",dir:"rtl"},cl={class:"print"},vl={class:"flex flex-row gap-4 mb-10"},yl={__name:"DrugManagement",setup(e){const n=g(new Date),b=g([]),a=["#","Name","Brand","Dose","When","Frequency","Duration"],p=g(""),c=g(""),_=v=>{console.log(v),b.value.push(v)},s=v=>{b.value.splice(v,1)};return(v,y)=>{const U=se,S=Ee,B=ue,O=pe,x=ye,T=be,G=ul,W=me;return t(),f(W,null,{default:F(()=>[l("div",pl,[r(U,{to:"/create"},{default:F(()=>y[3]||(y[3]=[j("Create or Edit Drugs")])),_:1})]),l("div",ml,[l("div",null,[l("p",null,"الاسم : "+m($(p)),1),l("p",null,"العمر: "+m($(c)),1)]),l("div",null,[l("p",null,"التاريخ: "+m(new Intl.DateTimeFormat("en-GB").format($(n))),1)])]),r(S,{drugs:$(b),header:a,onDeleteDrug:s},null,8,["drugs"]),l("div",cl,[r(B,{class:"my-10"}),l("div",vl,[r(O,{modelValue:$(p),"onUpdate:modelValue":y[0]||(y[0]=C=>L(p)?p.value=C:null),placeholder:"Patient Name"},null,8,["modelValue"]),r(O,{modelValue:$(c),"onUpdate:modelValue":y[1]||(y[1]=C=>L(c)?c.value=C:null),placeholder:"Patient Age"},null,8,["modelValue"]),r(T,{popper:{placement:"bottom-start"}},{panel:F(({close:C})=>[r(x,{modelValue:$(n),"onUpdate:modelValue":y[2]||(y[2]=V=>L(n)?n.value=V:null),"is-required":"",onClose:C},null,8,["modelValue","onClose"])]),default:F(()=>[r(U,{icon:"i-heroicons-calendar-days-20-solid",label:$(ve)($(n),"d MMM, yyy")},null,8,["label"])]),_:1})]),r(G,{onAddDrug:_})])]),_:1})}}},bl={};function fl(e,n){const b=yl;return t(),i("div",null,[r(b)])}const $l=Q(bl,[["render",fl]]);export{$l as default};
