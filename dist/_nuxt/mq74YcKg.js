import{i as He,_ as re,u as oe,a as Qe,b as Pe,c as Ue,d as Ce,e as Ye,f as Xe,g as Ze}from"./--Zecyzw.js";import{m as ae,e as N,_ as Z,f as le,g as G,h as v,r as V,i as ne,j as Le,k as $e,l as $,o as m,c as C,a as w,n as F,p as q,q as y,b as Y,s as E,v as _e,x as et,y as tt,z as nt,d as ie,t as L,A as st,B as it,F as Q,C as _,D as se,E as rt,G as W,H as me,I as ke,w as ot,J as B,K as at}from"./DHKsbI74.js";import"./C0I7Zrro.js";import"./uK-Emc9H.js";const lt={wrapper:"relative overflow-x-auto",base:"min-w-full table-fixed",divide:"divide-y divide-gray-300 dark:divide-gray-700",thead:"relative",tbody:"divide-y divide-gray-200 dark:divide-gray-800",caption:"sr-only",tr:{base:"",selected:"bg-gray-50 dark:bg-gray-800/50",expanded:"bg-gray-50 dark:bg-gray-800/50",active:"hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer"},th:{base:"text-left rtl:text-right",padding:"px-4 py-3.5",color:"text-gray-900 dark:text-white",font:"font-semibold",size:"text-sm"},td:{base:"whitespace-nowrap",padding:"px-4 py-4",color:"text-gray-500 dark:text-gray-400",font:"",size:"text-sm"},checkbox:{padding:"ps-4"},loadingState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4 animate-spin"},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},expand:{icon:"transform transition-transform duration-200"},progress:{wrapper:"absolute inset-x-0 -bottom-[0.5px] p-0"},default:{sortAscIcon:"i-heroicons-bars-arrow-up-20-solid",sortDescIcon:"i-heroicons-bars-arrow-down-20-solid",sortButton:{icon:"i-heroicons-arrows-up-down-20-solid",trailing:!0,square:!0,color:"gray",variant:"ghost",class:"-m-1.5"},expandButton:{icon:"i-heroicons-chevron-down",color:"gray",variant:"ghost",size:"xs",class:"-my-1.5 align-middle"},checkbox:{color:"primary"},progress:{color:"primary",animation:"carousel"},loadingState:{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."},emptyState:{icon:"i-heroicons-circle-stack-20-solid",label:"No items."}}},ut={wrapper:"w-full flex flex-col gap-2",indicator:{container:{base:"flex flex-row justify-end",width:"min-w-fit",transition:"transition-all"},align:"text-end",width:"w-fit",color:"text-gray-400 dark:text-gray-500",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base","2xl":"text-base"}},progress:{base:"block appearance-none border-none overflow-hidden",width:"w-full [&::-webkit-progress-bar]:w-full",size:{"2xs":"h-px",xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-3",xl:"h-4","2xl":"h-5"},rounded:"rounded-full [&::-webkit-progress-bar]:rounded-full",track:"[&::-webkit-progress-bar]:bg-gray-200 [&::-webkit-progress-bar]:dark:bg-gray-700 [@supports(selector(&::-moz-progress-bar))]:bg-gray-200 [@supports(selector(&::-moz-progress-bar))]:dark:bg-gray-700",bar:"[&::-webkit-progress-value]:rounded-full [&::-webkit-progress-value]:transition-all [&::-webkit-progress-value]:ease-in-out [&::-moz-progress-bar]:rounded-full",color:"text-{color}-500 dark:text-{color}-400",background:"[&::-webkit-progress-value]:bg-current [&::-moz-progress-bar]:bg-current",indeterminate:{base:"indeterminate:relative",rounded:"indeterminate:after:rounded-full [&:indeterminate::-webkit-progress-value]:rounded-full [&:indeterminate::-moz-progress-bar]:rounded-full"}},steps:{base:"grid grid-cols-1",color:"text-{color}-500 dark:text-{color}-400",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base","2xl":"text-base"}},step:{base:"transition-all opacity-0 truncate row-start-1 col-start-1",align:"text-end",active:"opacity-100",first:"text-gray-500 dark:text-gray-400"},animation:{carousel:"bar-animation-carousel","carousel-inverse":"bar-animation-carousel-inverse",swing:"bar-animation-swing",elastic:"bar-animation-elastic"},default:{color:"primary",size:"md",animation:"carousel"}},ct={wrapper:"relative flex items-start",container:"flex items-center h-5",base:"h-4 w-4 dark:checked:bg-current dark:checked:border-transparent dark:indeterminate:bg-current dark:indeterminate:border-transparent disabled:opacity-50 disabled:cursor-not-allowed focus:ring-0 focus:ring-transparent focus:ring-offset-transparent",form:"form-checkbox",rounded:"rounded",color:"text-{color}-500 dark:text-{color}-400",background:"bg-white dark:bg-gray-900",border:"border border-gray-300 dark:border-gray-700",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",inner:"ms-3 flex flex-col",label:"text-sm font-medium text-gray-700 dark:text-gray-200",required:"text-sm text-red-500 dark:text-red-400",help:"text-sm text-gray-500 dark:text-gray-400",default:{color:"primary"}},z=ae(N.ui.strategy,N.ui.input,He),dt=le({components:{UIcon:re},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>z.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(t){return Object.keys(z.size).includes(t)}},color:{type:String,default:()=>z.default.color,validator(t){return[...N.ui.colors,...Object.keys(z.color)].includes(t)}},variant:{type:String,default:()=>z.default.variant,validator(t){return[...Object.keys(z.variant),...Object.values(z.color).flatMap(e=>Object.keys(e))].includes(t)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(t,{emit:e,slots:n}){const{ui:s,attrs:i}=oe("input",G(t,"ui"),z,G(t,"class")),{size:o,rounded:r}=Qe({ui:s,props:t}),{emitFormBlur:a,emitFormInput:l,size:f,color:u,inputId:g,name:p}=Pe(t,z),S=v(()=>o.value??f.value),h=V(ne({},t.modelModifiers,{trim:!1,lazy:!1,number:!1,nullify:!1})),d=V(null),U=()=>{var O;t.autofocus&&((O=d.value)==null||O.focus())},k=O=>{h.value.trim&&(O=O.trim()),(h.value.number||t.type==="number")&&(O=_e(O)),h.value.nullify&&(O||(O=null)),e("update:modelValue",O),l()},I=O=>{h.value.lazy||k(O.target.value)},R=O=>{if(t.type==="file"){const c=O.target.files;e("change",c)}else{const c=O.target.value;e("change",c),h.value.lazy&&k(c),h.value.trim&&(O.target.value=c.trim())}},j=O=>{a(),e("blur",O)};Le(()=>{setTimeout(()=>{U()},t.autofocusDelay)});const T=v(()=>{var c,b;const O=((b=(c=s.value.color)==null?void 0:c[u.value])==null?void 0:b[t.variant])||s.value.variant[t.variant];return $e($(s.value.base,s.value.form,r.value,s.value.placeholder,t.type==="file"&&s.value.file.base,s.value.size[S.value],t.padded?s.value.padding[S.value]:"p-0",O==null?void 0:O.replaceAll("{color}",u.value),(A.value||n.leading)&&s.value.leading.padding[S.value],(J.value||n.trailing)&&s.value.trailing.padding[S.value]),t.inputClass)}),A=v(()=>t.icon&&t.leading||t.icon&&!t.trailing||t.loading&&!t.trailing||t.leadingIcon),J=v(()=>t.icon&&t.trailing||t.loading&&t.trailing||t.trailingIcon),ue=v(()=>t.loading?t.loadingIcon:t.leadingIcon||t.icon),ce=v(()=>t.loading&&!A.value?t.loadingIcon:t.trailingIcon||t.icon),de=v(()=>$(s.value.icon.leading.wrapper,s.value.icon.leading.pointer,s.value.icon.leading.padding[S.value])),ee=v(()=>$(s.value.icon.base,u.value&&N.ui.colors.includes(u.value)&&s.value.icon.color.replaceAll("{color}",u.value),s.value.icon.size[S.value],t.loading&&s.value.icon.loading)),he=v(()=>$(s.value.icon.trailing.wrapper,s.value.icon.trailing.pointer,s.value.icon.trailing.padding[S.value])),pe=v(()=>$(s.value.icon.base,u.value&&N.ui.colors.includes(u.value)&&s.value.icon.color.replaceAll("{color}",u.value),s.value.icon.size[S.value],t.loading&&!A.value&&s.value.icon.loading));return{ui:s,attrs:i,name:p,inputId:g,input:d,isLeading:A,isTrailing:J,inputClass:T,leadingIconName:ue,leadingIconClass:ee,leadingWrapperIconClass:de,trailingIconName:ce,trailingIconClass:pe,trailingWrapperIconClass:he,onInput:I,onChange:R,onBlur:j}}}),ht=["id","name","type","required","placeholder","disabled"];function pt(t,e,n,s,i,o){const r=re;return m(),C("div",{class:y(t.type==="hidden"?"hidden":t.ui.wrapper)},[w("input",F({id:t.inputId,ref:"input",name:t.name,type:t.type,required:t.required,placeholder:t.placeholder,disabled:t.disabled,class:t.inputClass},t.type==="file"?t.attrs:{...t.attrs,value:t.modelValue},{onInput:e[0]||(e[0]=(...a)=>t.onInput&&t.onInput(...a)),onBlur:e[1]||(e[1]=(...a)=>t.onBlur&&t.onBlur(...a)),onChange:e[2]||(e[2]=(...a)=>t.onChange&&t.onChange(...a))}),null,16,ht),q(t.$slots,"default"),t.isLeading&&t.leadingIconName||t.$slots.leading?(m(),C("span",{key:0,class:y(t.leadingWrapperIconClass)},[q(t.$slots,"leading",{disabled:t.disabled,loading:t.loading},()=>[Y(r,{name:t.leadingIconName,class:y(t.leadingIconClass)},null,8,["name","class"])])],2)):E("",!0),t.isTrailing&&t.trailingIconName||t.$slots.trailing?(m(),C("span",{key:1,class:y(t.trailingWrapperIconClass)},[q(t.$slots,"trailing",{disabled:t.disabled,loading:t.loading},()=>[Y(r,{name:t.trailingIconName,class:y(t.trailingIconClass)},null,8,["name","class"])])],2)):E("",!0)],2)}const ft=Z(dt,[["render",pt]]),gt=et,Oe=ae(N.ui.strategy,N.ui.checkbox,ct),mt=le({inheritAttrs:!1,props:{id:{type:String,default:()=>null},value:{type:[String,Number,Boolean,Object],default:null},modelValue:{type:[Boolean,Array],default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:void 0},help:{type:String,default:null},label:{type:String,default:null},required:{type:Boolean,default:!1},color:{type:String,default:()=>Oe.default.color,validator(t){return N.ui.colors.includes(t)}},inputClass:{type:String,default:""},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(t,{emit:e}){const{ui:n,attrs:s}=oe("checkbox",G(t,"ui"),Oe,G(t,"class")),{emitFormChange:i,color:o,name:r,inputId:a}=Pe(t),l=a.value??gt(),f=v({get(){return t.modelValue},set(p){e("update:modelValue",p)}}),u=p=>{e("change",p.target.checked),i()},g=v(()=>$e($(n.value.base,n.value.form,n.value.rounded,n.value.background,n.value.border,o.value&&n.value.ring.replaceAll("{color}",o.value),o.value&&n.value.color.replaceAll("{color}",o.value)),t.inputClass));return{ui:n,attrs:s,toggle:f,inputId:l,name:r,inputClass:g,onChange:u}}}),bt=["data-n-ids"],yt=["id","name","required","value","disabled","indeterminate"],vt=["for"];function wt(t,e,n,s,i,o){return m(),C("div",{class:y(t.ui.wrapper),"data-n-ids":t.attrs["data-n-ids"]},[w("div",{class:y(t.ui.container)},[tt(w("input",F({id:t.inputId,"onUpdate:modelValue":e[0]||(e[0]=r=>t.toggle=r),name:t.name,required:t.required,value:t.value,disabled:t.disabled,indeterminate:t.indeterminate,type:"checkbox",class:t.inputClass},t.attrs,{onChange:e[1]||(e[1]=(...r)=>t.onChange&&t.onChange(...r))}),null,16,yt),[[nt,t.toggle]])],2),t.label||t.$slots.label?(m(),C("div",{key:0,class:y(t.ui.inner)},[w("label",{for:t.inputId,class:y(t.ui.label)},[q(t.$slots,"label",{label:t.label},()=>[ie(L(t.label),1)]),t.required?(m(),C("span",{key:0,class:y(t.ui.required)},"*",2)):E("",!0)],10,vt),t.help||t.$slots.help?(m(),C("p",{key:0,class:y(t.ui.help)},[q(t.$slots,"help",{help:t.help},()=>[ie(L(t.help),1)])],2)):E("",!0)],2)):E("",!0)],10,bt)}const Ne=Z(mt,[["render",wt]]),H=ae(N.ui.strategy,N.ui.progress,ut),St=le({inheritAttrs:!1,props:{value:{type:Number,default:null},max:{type:[Number,Array],default:100},indicator:{type:Boolean,default:!1},animation:{type:String,default:()=>H.default.animation,validator(t){return Object.keys(H.animation).includes(t)}},size:{type:String,default:()=>H.default.size,validator(t){return Object.keys(H.progress.size).includes(t)}},color:{type:String,default:()=>H.default.color,validator(t){return N.ui.colors.includes(t)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(t){const{ui:e,attrs:n}=oe("progress",G(t,"ui"),H,G(t,"class")),s=v(()=>$(e.value.indicator.container.base,e.value.indicator.container.width,e.value.indicator.container.transition)),i=v(()=>$(e.value.indicator.align,e.value.indicator.width,e.value.indicator.color,e.value.indicator.size[t.size])),o=v(()=>{var I;const k=[e.value.progress.base,e.value.progress.width,e.value.progress.size[t.size],e.value.progress.rounded,e.value.progress.track,e.value.progress.bar,(I=e.value.progress.color)==null?void 0:I.replaceAll("{color}",t.color),e.value.progress.background,e.value.progress.indeterminate.base,e.value.progress.indeterminate.rounded];return S.value&&k.push(e.value.animation[t.animation]),$(...k)}),r=v(()=>{var k;return $(e.value.steps.base,(k=e.value.steps.color)==null?void 0:k.replaceAll("{color}",t.color),e.value.steps.size[t.size])}),a=v(()=>$(e.value.step.base,e.value.step.align)),l=v(()=>$(e.value.step.active)),f=v(()=>$(e.value.step.first));function u(k){return k===Number(t.value)}function g(k){return k===0}function p(k){k=Number(k);const I=[a.value];return g(k)&&I.push(f.value),u(k)&&I.push(l.value),I.join(" ")}const S=v(()=>t.value===void 0||t.value===null),h=v(()=>Array.isArray(t.max)),d=v(()=>S.value?null:Array.isArray(t.max)?t.max.length-1:Number(t.max)),U=v(()=>{if(!S.value)switch(!0){case t.value<0:return 0;case t.value>d.value:return 100;default:return t.value/d.value*100}});return{ui:e,attrs:n,indicatorContainerClass:s,indicatorClass:i,progressClass:o,stepsClass:r,stepClasses:p,isIndeterminate:S,isSteps:h,realMax:d,percent:U}}}),Ct=["aria-valuemax","aria-valuenow"];function kt(t,e,n,s,i,o){return m(),C("div",{class:y(t.ui.wrapper),role:"progressbar"},[t.indicator||t.$slots.indicator?q(t.$slots,"indicator",it(F({key:0},{percent:t.percent})),()=>[t.isSteps?E("",!0):(m(),C("div",{key:0,class:y(t.indicatorContainerClass),style:st({width:`${t.percent}%`})},[w("div",{class:y(t.indicatorClass)},L(Math.round(t.percent))+"% ",3)],6))],!0):E("",!0),w("progress",F({"aria-valuemax":t.realMax,"aria-valuenow":t.value,class:t.progressClass},{value:t.value,max:t.realMax,...t.attrs}),L(t.percent!==void 0?`${Math.round(t.percent)}%`:void 0),17,Ct),t.isSteps?(m(),C("div",{key:1,class:y(t.stepsClass)},[(m(!0),C(Q,null,_(t.max,(r,a)=>(m(),C("div",{key:a,class:y(t.stepClasses(a))},[q(t.$slots,`step-${a}`,F({ref_for:!0},{step:r}),()=>[ie(L(r),1)],!0)],2))),128))],2)):E("",!0)],2)}const De=Z(St,[["render",kt],["__scopeId","data-v-7e6e4781"]]);function Ot(t){return t?t[0].toUpperCase()+t.slice(1):""}const K=ae(N.ui.strategy,N.ui.table,lt);function It(t,e){return Ye(t,e)}function Ie(t,e,n){return t===e?0:n==="asc"?t<e?-1:1:t>e?-1:1}function Re(t){return new Set(t.map(e=>JSON.stringify(e)))}function Rt(t){return e=>se(e,t)}const At=le({components:{UIcon:re,UButton:Ue,UProgress:De,UCheckbox:Ne},inheritAttrs:!1,props:{modelValue:{type:Array,default:null},by:{type:[String,Function],default:()=>It},rows:{type:Array,default:()=>[]},columns:{type:Array,default:null},columnAttribute:{type:String,default:"label"},sort:{type:Object,default:()=>({})},sortMode:{type:String,default:"auto"},sortButton:{type:Object,default:()=>K.default.sortButton},sortAscIcon:{type:String,default:()=>K.default.sortAscIcon},sortDescIcon:{type:String,default:()=>K.default.sortDescIcon},expandButton:{type:Object,default:()=>K.default.expandButton},expand:{type:Object,default:()=>null},loading:{type:Boolean,default:!1},loadingState:{type:Object,default:()=>K.default.loadingState},emptyState:{type:Object,default:()=>K.default.emptyState},caption:{type:String,default:null},progress:{type:Object,default:()=>K.default.progress},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},multipleExpand:{type:Boolean,default:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue","update:sort","update:expand","select:all"],setup(t,{emit:e,attrs:n}){const{ui:s,attrs:i}=oe("table",G(t,"ui"),K,G(t,"class")),o=v(()=>t.columns??Object.keys(t.rows[0]??{}).map(c=>({key:c,label:Ot(c),sortable:!1,class:void 0,sort:Ie}))),r=Ce(t,"sort",e,{passive:!0,defaultValue:ne({},t.sort,{column:null,direction:"asc"})}),a=Ce(t,"expand",e,{passive:!0,defaultValue:ne({},t.expand,{openedRows:[],row:null})}),l=V(null),f={column:r.value.column,direction:null},u=v(()=>{var P;if(!((P=r.value)!=null&&P.column)||t.sortMode==="manual")return t.rows;const{column:c,direction:b}=r.value;return t.rows.slice().sort((fe,xe)=>{var Se;const We=se(fe,c),Ge=se(xe,c);return(((Se=o.value.find(Je=>Je.key===c))==null?void 0:Se.sort)??Ie)(We,Ge,b)})}),g=v({get(){return t.modelValue},set(c){e("update:modelValue",c)}}),p=v(()=>t.rows.length),S=v(()=>{const c=Re(g.value),b=Re(t.rows);return Array.from(c).filter(P=>b.has(P)).length}),h=v(()=>!g.value||!t.rows?!1:S.value>0&&S.value<p.value),d=v(()=>S.value===p.value),U=v(()=>t.emptyState===null?null:{...s.value.default.emptyState,...t.emptyState}),k=v(()=>t.loadingState===null?null:{...s.value.default.loadingState,...t.loadingState});function I(c,b){if(typeof t.by=="string"){const P=Rt(t.by);return P(c)===P(b)}return t.by(c,b)}function R(c){return t.modelValue?g.value.some(b=>I(ke(b),ke(c))):!1}function j(c){if(r.value.column===c.key){const b=!c.direction||c.direction==="asc"?"desc":"asc";r.value.direction===b?r.value=ne({},f,{column:null,direction:"asc"}):r.value={column:r.value.column,direction:r.value.direction==="asc"?"desc":"asc"}}else r.value={column:c.key,direction:c.direction||"asc"}}function T(c){const b=window.getSelection();b&&b.toString().length>0||n.onSelect&&n.onSelect(c)}function A(c,b){n.onContextmenu&&n.onContextmenu(c,b)}function J(){const c=[...g.value];t.rows.forEach(b=>{R(b)||c.push(b)}),g.value=c}function ue(c){c?J():g.value=[],e("select:all",c)}function ce(c,b){if(c)g.value=t.singleSelect?[b]:[...g.value,b];else{const P=g.value.findIndex(fe=>I(fe,b));g.value.splice(P,1)}}function de(c,b,P=""){return se(c,b,P)}function ee(c){var b;return(b=a.value)!=null&&b.openedRows?a.value.openedRows.some(P=>I(P,c)):!1}function he(c,b){return t.columns?c===0&&!t.columns.find(P=>P.key===b):c===0}function pe(c){a.value={openedRows:ee(c)?a.value.openedRows.filter(b=>!I(b,c)):t.multipleExpand?[...a.value.openedRows,c]:[c],row:c}}function O(c){if(c.sortable){if(r.value.column!==c.key)return"none";if(r.value.direction==="asc")return"ascending";if(r.value.direction==="desc")return"descending"}}return rt(u,()=>{l.value=new Date},{deep:!0}),{ui:s,attrs:i,sort:r,columns:o,rows:u,selected:g,indeterminate:h,emptyState:U,loadingState:k,isAllRowChecked:d,onChangeCheckbox:ce,isSelected:R,onSort:j,onSelect:T,onContextmenu:A,onChange:ue,getRowData:de,toggleOpened:pe,getAriaSort:O,isExpanded:ee,shouldRenderColumnInFirstPlace:he,retriggerSlot:l}}}),jt=["aria-sort"],Tt={key:1},qt={key:0},Et={key:0},Pt=["colspan"],Ut={key:1},Lt=["colspan"],$t=["onClick","onContextmenu"],Nt={key:0},Dt={colspan:"100%"};function Bt(t,e,n,s,i,o){const r=Ne,a=Ue,l=De,f=re;return m(),C("div",F({class:t.ui.wrapper},t.attrs),[w("table",{class:y([t.ui.base,t.ui.divide])},[t.$slots.caption||t.caption?q(t.$slots,"caption",{key:0},()=>[w("caption",{class:y(t.ui.caption)},L(t.caption),3)]):E("",!0),w("thead",{class:y(t.ui.thead)},[w("tr",{class:y(t.ui.tr.base)},[t.expand?(m(),C("th",{key:0,scope:"col",class:y(t.ui.tr.base)},e[0]||(e[0]=[w("span",{class:"sr-only"},"Expand",-1)]),2)):E("",!0),(m(!0),C(Q,null,_(t.columns,(u,g)=>(m(),C("th",{key:g,scope:"col",class:y([t.ui.th.base,t.ui.th.padding,t.ui.th.color,t.ui.th.font,t.ui.th.size,u.key==="select"&&t.ui.checkbox.padding,u.class]),"aria-sort":t.getAriaSort(u)},[!t.singleSelect&&t.modelValue&&(u.key==="select"||t.shouldRenderColumnInFirstPlace(g,"select"))?q(t.$slots,"select-header",{key:0,indeterminate:t.indeterminate,checked:t.isAllRowChecked,change:t.onChange},()=>[Y(r,F({"model-value":t.isAllRowChecked,indeterminate:t.indeterminate,ref_for:!0},t.ui.default.checkbox,{"aria-label":"Select all",onChange:t.onChange}),null,16,["model-value","indeterminate","onChange"])]):q(t.$slots,`${u.key}-header`,{key:1,column:u,sort:t.sort,onSort:t.onSort},()=>[u.sortable?(m(),W(a,F({key:0,ref_for:!0},{...t.ui.default.sortButton||{},...t.sortButton},{icon:!t.sort.column||t.sort.column!==u.key?t.sortButton.icon||t.ui.default.sortButton.icon:t.sort.direction==="asc"?t.sortAscIcon:t.sortDescIcon,label:u[t.columnAttribute],onClick:p=>t.onSort(u)}),null,16,["icon","label","onClick"])):(m(),C("span",Tt,L(u[t.columnAttribute]),1))])],10,jt))),128))],2),t.loading&&t.progress?(m(),C("tr",qt,[w("td",{colspan:0,class:y(t.ui.progress.wrapper)},[Y(l,F({...t.ui.default.progress||{},...t.progress},{size:"2xs"}),null,16)],2)])):E("",!0)],2),w("tbody",{class:y(t.ui.tbody)},[t.loadingState&&t.loading&&!t.rows.length?(m(),C("tr",Et,[w("td",{colspan:t.columns.length+(t.modelValue?1:0)+(t.expand?1:0)},[q(t.$slots,"loading-state",{},()=>[w("div",{class:y(t.ui.loadingState.wrapper)},[t.loadingState.icon?(m(),W(f,{key:0,name:t.loadingState.icon,class:y(t.ui.loadingState.icon),"aria-hidden":"true"},null,8,["name","class"])):E("",!0),w("p",{class:y(t.ui.loadingState.label)},L(t.loadingState.label),3)],2)])],8,Pt)])):t.emptyState&&!t.rows.length?(m(),C("tr",Ut,[w("td",{colspan:t.columns.length+(t.modelValue?1:0)+(t.expand?1:0)},[q(t.$slots,"empty-state",{},()=>[w("div",{class:y(t.ui.emptyState.wrapper)},[t.emptyState.icon?(m(),W(f,{key:0,name:t.emptyState.icon,class:y(t.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):E("",!0),w("p",{class:y(t.ui.emptyState.label)},L(t.emptyState.label),3)],2)])],8,Lt)])):(m(!0),C(Q,{key:2},_(t.rows,(u,g)=>(m(),C(Q,{key:g},[w("tr",{class:y([t.ui.tr.base,t.isSelected(u)&&t.ui.tr.selected,t.isExpanded(u)&&t.ui.tr.expanded,t.$attrs.onSelect&&t.ui.tr.active,u==null?void 0:u.class]),onClick:()=>t.onSelect(u),onContextmenu:p=>t.onContextmenu(p,u)},[t.expand?(m(),C("td",{key:0,class:y([t.ui.td.base,t.ui.td.padding,t.ui.td.color,t.ui.td.font,t.ui.td.size])},[t.$slots["expand-action"]?q(t.$slots,"expand-action",{key:0,row:u,isExpanded:t.isExpanded(u),toggle:()=>t.toggleOpened(u)}):(m(),W(a,F({key:1,disabled:u.disabledExpand,ref_for:!0},{...t.ui.default.expandButton||{},...t.expandButton},{ui:{icon:{base:[t.ui.expand.icon,t.isExpanded(u)&&"rotate-180"].join(" ")}},onClickCapture:me(p=>t.toggleOpened(u),["stop"])}),null,16,["disabled","ui","onClickCapture"]))],2)):E("",!0),(m(!0),C(Q,null,_(t.columns,(p,S)=>{var h;return m(),C("td",{key:S,class:y([t.ui.td.base,t.ui.td.padding,t.ui.td.color,t.ui.td.font,t.ui.td.size,p==null?void 0:p.rowClass,(h=u[p.key])==null?void 0:h.class,p.key==="select"&&t.ui.checkbox.padding])},[t.modelValue&&(p.key==="select"||t.shouldRenderColumnInFirstPlace(S,"select"))?q(t.$slots,"select-data",{key:0,checked:t.isSelected(u),change:d=>t.onChangeCheckbox(d,u)},()=>[Y(r,F({"model-value":t.isSelected(u),ref_for:!0},t.ui.default.checkbox,{"aria-label":"Select row",onChange:d=>t.onChangeCheckbox(d,u),onClickCapture:me(()=>t.onSelect(u),["stop"])}),null,16,["model-value","onChange","onClickCapture"])]):q(t.$slots,`${p.key}-data`,{key:t.retriggerSlot,column:p,row:u,index:g,getRowData:d=>t.getRowData(u,p.key,d)},()=>[ie(L(t.getRowData(u,p.key)),1)])],2)}),128))],42,$t),t.isExpanded(u)?(m(),C("tr",Nt,[w("td",Dt,[q(t.$slots,"expand",{row:u,index:g})])])):E("",!0)],64))),128))],2)],2)],16)}const Ft=Z(At,[["render",Bt]]);class D extends Error{constructor(e){var n,s,i,o;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,D.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof D||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(n=this.response)==null?void 0:n.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(o=(i=(s=this.originalError)==null?void 0:s.cause)==null?void 0:i.message)!=null&&o.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const te=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function zt(t,e){const n={};if(typeof t!="string")return n;const s=Object.assign({},{}).decode||Vt;let i=0;for(;i<t.length;){const o=t.indexOf("=",i);if(o===-1)break;let r=t.indexOf(";",i);if(r===-1)r=t.length;else if(r<o){i=t.lastIndexOf(";",o-1)+1;continue}const a=t.slice(i,o).trim();if(n[a]===void 0){let l=t.slice(o+1,r).trim();l.charCodeAt(0)===34&&(l=l.slice(1,-1));try{n[a]=s(l)}catch{n[a]=l}}i=r+1}return n}function Ae(t,e,n){const s=Object.assign({},n||{}),i=s.encode||Mt;if(!te.test(t))throw new TypeError("argument name is invalid");const o=i(e);if(o&&!te.test(o))throw new TypeError("argument val is invalid");let r=t+"="+o;if(s.maxAge!=null){const a=s.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(a)}if(s.domain){if(!te.test(s.domain))throw new TypeError("option domain is invalid");r+="; Domain="+s.domain}if(s.path){if(!te.test(s.path))throw new TypeError("option path is invalid");r+="; Path="+s.path}if(s.expires){if(!function(l){return Object.prototype.toString.call(l)==="[object Date]"||l instanceof Date}(s.expires)||isNaN(s.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(r+="; HttpOnly"),s.secure&&(r+="; Secure"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():s.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function Vt(t){return t.indexOf("%")!==-1?decodeURIComponent(t):t}function Mt(t){return encodeURIComponent(t)}const Kt=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let Be;function X(t){if(t)try{const e=decodeURIComponent(Be(t.split(".")[1]).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function Fe(t,e=0){let n=X(t);return!(Object.keys(n).length>0&&(!n.exp||n.exp-e>Date.now()/1e3))}Be=typeof atob!="function"||Kt?t=>{let e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,s,i=0,o=0,r="";s=e.charAt(o++);~s&&(n=i%4?64*n+s:s,i++%4)?r+=String.fromCharCode(255&n>>(-2*i&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return r}:atob;const je="pb_auth";class ve{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!Fe(this.token)}get isSuperuser(){var n,s;let e=X(this.token);return e.type=="auth"&&(((n=this.record)==null?void 0:n.collectionName)=="_superusers"||!((s=this.record)!=null&&s.collectionName)&&e.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),X(this.token).type=="auth"&&!this.isSuperuser}save(e,n){this.baseToken=e||"",this.baseModel=n||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,n=je){const s=zt(e||"")[n]||"";let i={};try{i=JSON.parse(s),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.record||i.model||null)}exportToCookie(e,n=je){var l,f;const s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},i=X(this.token);s.expires=i!=null&&i.exp?new Date(1e3*i.exp):new Date("1970-01-01"),e=Object.assign({},s,e);const o={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let r=Ae(n,JSON.stringify(o),e);const a=typeof Blob<"u"?new Blob([r]).size:r.length;if(o.record&&a>4096){o.record={id:(l=o.record)==null?void 0:l.id,email:(f=o.record)==null?void 0:f.email};const u=["collectionId","collectionName","verified"];for(const g in this.record)u.includes(g)&&(o.record[g]=this.record[g]);r=Ae(n,JSON.stringify(o),e)}return r}onChange(e,n=!1){return this._onChangeCallbacks.push(e),n&&e(this.token,this.record),()=>{for(let s=this._onChangeCallbacks.length-1;s>=0;s--)if(this._onChangeCallbacks[s]==e)return delete this._onChangeCallbacks[s],void this._onChangeCallbacks.splice(s,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class xt extends ve{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,n){this._storageSet(this.storageKey,{token:e,record:n}),super.save(e,n)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const n=window.localStorage.getItem(e)||"";try{return JSON.parse(n)}catch{return n}}return this.storageFallback[e]}_storageSet(e,n){if(typeof window<"u"&&(window!=null&&window.localStorage)){let s=n;typeof n!="string"&&(s=JSON.stringify(n)),window.localStorage.setItem(e,s)}else this.storageFallback[e]=n}_storageRemove(e){var n;typeof window<"u"&&(window!=null&&window.localStorage)&&((n=window.localStorage)==null||n.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const n=this._storageGet(this.storageKey)||{};super.save(n.token||"",n.record||n.model||null)})}}class M{constructor(e){this.client=e}}class Wt extends M{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,n){return n=Object.assign({method:"PATCH",body:e},n),this.client.send("/api/settings",n)}async testS3(e="storage",n){return n=Object.assign({method:"POST",body:{filesystem:e}},n),this.client.send("/api/settings/test/s3",n).then(()=>!0)}async testEmail(e,n,s,i){return i=Object.assign({method:"POST",body:{email:n,template:s,collection:e}},i),this.client.send("/api/settings/test/email",i).then(()=>!0)}async generateAppleClientSecret(e,n,s,i,o,r){return r=Object.assign({method:"POST",body:{clientId:e,teamId:n,keyId:s,privateKey:i,duration:o}},r),this.client.send("/api/settings/apple/generate-client-secret",r)}}const Gt=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function we(t){if(t){t.query=t.query||{};for(let e in t)Gt.includes(e)||(t.query[e]=t[e],delete t[e])}}function ze(t){const e=[];for(const n in t){if(t[n]===null)continue;const s=t[n],i=encodeURIComponent(n);if(Array.isArray(s))for(const o of s)e.push(i+"="+encodeURIComponent(o));else s instanceof Date?e.push(i+"="+encodeURIComponent(s.toISOString())):typeof s!==null&&typeof s=="object"?e.push(i+"="+encodeURIComponent(JSON.stringify(s))):e.push(i+"="+encodeURIComponent(s))}return e.join("&")}class Ve extends M{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,n,s){var r;if(!e)throw new Error("topic must be set.");let i=e;if(s){we(s=Object.assign({},s));const a="options="+encodeURIComponent(JSON.stringify({query:s.query,headers:s.headers}));i+=(i.includes("?")?"&":"?")+a}const o=function(a){const l=a;let f;try{f=JSON.parse(l==null?void 0:l.data)}catch{}n(f||{})};return this.subscriptions[i]||(this.subscriptions[i]=[]),this.subscriptions[i].push(o),this.isConnected?this.subscriptions[i].length===1?await this.submitSubscriptions():(r=this.eventSource)==null||r.addEventListener(i,o):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,o)}async unsubscribe(e){var s;let n=!1;if(e){const i=this.getSubscriptionsByTopic(e);for(let o in i)if(this.hasSubscriptionListeners(o)){for(let r of this.subscriptions[o])(s=this.eventSource)==null||s.removeEventListener(o,r);delete this.subscriptions[o],n||(n=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?n&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var s;let n=!1;for(let i in this.subscriptions)if((i+"?").startsWith(e)){n=!0;for(let o of this.subscriptions[i])(s=this.eventSource)==null||s.removeEventListener(i,o);delete this.subscriptions[i]}n&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,n){var o;let s=!1;const i=this.getSubscriptionsByTopic(e);for(let r in i){if(!Array.isArray(this.subscriptions[r])||!this.subscriptions[r].length)continue;let a=!1;for(let l=this.subscriptions[r].length-1;l>=0;l--)this.subscriptions[r][l]===n&&(a=!0,delete this.subscriptions[r][l],this.subscriptions[r].splice(l,1),(o=this.eventSource)==null||o.removeEventListener(r,n));a&&(this.subscriptions[r].length||delete this.subscriptions[r],s||this.hasSubscriptionListeners(r)||(s=!0))}this.hasSubscriptionListeners()?s&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var n,s;if(this.subscriptions=this.subscriptions||{},e)return!!((n=this.subscriptions[e])!=null&&n.length);for(let i in this.subscriptions)if((s=this.subscriptions[i])!=null&&s.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const n={};e=e.includes("?")?e:e+"?";for(let s in this.subscriptions)(s+"?").startsWith(e)&&(n[s]=this.subscriptions[s]);return n}getNonEmptySubscriptionKeys(){const e=[];for(let n in this.subscriptions)this.subscriptions[n].length&&e.push(n);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let n of this.subscriptions[e])this.eventSource.addEventListener(e,n)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let n of this.subscriptions[e])this.eventSource.removeEventListener(e,n)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,n)=>{this.pendingConnects.push({resolve:e,reject:n}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const n=e;this.clientId=n==null?void 0:n.lastEventId,this.submitSubscriptions().then(async()=>{let s=3;for(;this.hasUnsentSubscriptions()&&s>0;)s--,await this.submitSubscriptions()}).then(()=>{for(let i of this.pendingConnects)i.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const s=this.getSubscriptionsByTopic("PB_CONNECT");for(let i in s)for(let o of s[i])o(e)}).catch(s=>{this.clientId="",this.connectErrorHandler(s)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const n of e)if(!this.lastSentSubscriptions.includes(n))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let s of this.pendingConnects)s.reject(new D(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const n=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},n)}disconnect(e=!1){var n;if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(n=this.eventSource)==null||n.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[]}}}class Me extends M{decode(e){return e}async getFullList(e,n){if(typeof e=="number")return this._getFullList(e,n);let s=500;return(n=Object.assign({},e,n)).batch&&(s=n.batch,delete n.batch),this._getFullList(s,n)}async getList(e=1,n=30,s){return(s=Object.assign({method:"GET"},s)).query=Object.assign({page:e,perPage:n},s.query),this.client.send(this.baseCrudPath,s).then(i=>{var o;return i.items=((o=i.items)==null?void 0:o.map(r=>this.decode(r)))||[],i})}async getFirstListItem(e,n){return(n=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},n)).query=Object.assign({filter:e,skipTotal:1},n.query),this.getList(1,1,n).then(s=>{var i;if(!((i=s==null?void 0:s.items)!=null&&i.length))throw new D({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return s.items[0]})}async getOne(e,n){if(!e)throw new D({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return n=Object.assign({method:"GET"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(s=>this.decode(s))}async create(e,n){return n=Object.assign({method:"POST",body:e},n),this.client.send(this.baseCrudPath,n).then(s=>this.decode(s))}async update(e,n,s){return s=Object.assign({method:"PATCH",body:n},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),s).then(i=>this.decode(i))}async delete(e,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(()=>!0)}_getFullList(e=500,n){(n=n||{}).query=Object.assign({skipTotal:1},n.query);let s=[],i=async o=>this.getList(o,e||500,n).then(r=>{const a=r.items;return s=s.concat(a),a.length==r.perPage?i(o+1):s});return i(1)}}function x(t,e,n,s){const i=s!==void 0;return i||n!==void 0?i?(console.warn(t),e.body=Object.assign({},e.body,n),e.query=Object.assign({},e.query,s),e):Object.assign(e,n):e}function ge(t){var e;(e=t._resetAutoRefresh)==null||e.call(t)}class Jt extends Me{constructor(e,n){super(e),this.collectionIdOrName=n}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}async subscribe(e,n,s){if(!e)throw new Error("Missing topic.");if(!n)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,n,s)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,n){if(typeof e=="number")return super.getFullList(e,n);const s=Object.assign({},e,n);return super.getFullList(s)}async getList(e=1,n=30,s){return super.getList(e,n,s)}async getFirstListItem(e,n){return super.getFirstListItem(e,n)}async getOne(e,n){return super.getOne(e,n)}async create(e,n){return super.create(e,n)}async update(e,n,s){return super.update(e,n,s).then(i=>{var o,r,a;if(((o=this.client.authStore.record)==null?void 0:o.id)===(i==null?void 0:i.id)&&(((r=this.client.authStore.record)==null?void 0:r.collectionId)===this.collectionIdOrName||((a=this.client.authStore.record)==null?void 0:a.collectionName)===this.collectionIdOrName)){let l=Object.assign({},this.client.authStore.record.expand),f=Object.assign({},this.client.authStore.record,i);l&&(f.expand=Object.assign(l,i.expand)),this.client.authStore.save(this.client.authStore.token,f)}return i})}async delete(e,n){return super.delete(e,n).then(s=>{var i,o,r;return!s||((i=this.client.authStore.record)==null?void 0:i.id)!==e||((o=this.client.authStore.record)==null?void 0:o.collectionId)!==this.collectionIdOrName&&((r=this.client.authStore.record)==null?void 0:r.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),s})}authResponse(e){const n=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,n),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:n})}async listAuthMethods(e){return e=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e)}async authWithPassword(e,n,s){let i;s=Object.assign({method:"POST",body:{identity:e,password:n}},s),this.isSuperusers&&(i=s.autoRefreshThreshold,delete s.autoRefreshThreshold,s.autoRefresh||ge(this.client));let o=await this.client.send(this.baseCollectionPath+"/auth-with-password",s);return o=this.authResponse(o),i&&this.isSuperusers&&function(a,l,f,u){ge(a);const g=a.beforeSend,p=a.authStore.record,S=a.authStore.onChange((h,d)=>{(!h||(d==null?void 0:d.id)!=(p==null?void 0:p.id)||(d!=null&&d.collectionId||p!=null&&p.collectionId)&&(d==null?void 0:d.collectionId)!=(p==null?void 0:p.collectionId))&&ge(a)});a._resetAutoRefresh=function(){S(),a.beforeSend=g,delete a._resetAutoRefresh},a.beforeSend=async(h,d)=>{var R;const U=a.authStore.token;if((R=d.query)!=null&&R.autoRefresh)return g?g(h,d):{url:h,sendOptions:d};let k=a.authStore.isValid;if(k&&Fe(a.authStore.token,l))try{await f()}catch{k=!1}k||await u();const I=d.headers||{};for(let j in I)if(j.toLowerCase()=="authorization"&&U==I[j]&&a.authStore.token){I[j]=a.authStore.token;break}return d.headers=I,g?g(h,d):{url:h,sendOptions:d}}}(this.client,i,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,n,Object.assign({autoRefresh:!0},s))),o}async authWithOAuth2Code(e,n,s,i,o,r,a){let l={method:"POST",body:{provider:e,code:n,codeVerifier:s,redirectURL:i,createData:o}};return l=x("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",l,r,a),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",l).then(f=>this.authResponse(f))}authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const n=(e==null?void 0:e[0])||{};let s=null;n.urlCallback||(s=Te(void 0));const i=new Ve(this.client);function o(){s==null||s.close(),i.unsubscribe()}const r={},a=n.requestKey;return a&&(r.requestKey=a),this.listAuthMethods(r).then(l=>{var p;const f=l.oauth2.providers.find(S=>S.name===n.provider);if(!f)throw new D(new Error(`Missing or invalid provider "${n.provider}".`));const u=this.client.buildURL("/api/oauth2-redirect"),g=a?(p=this.client.cancelControllers)==null?void 0:p[a]:void 0;return g&&(g.signal.onabort=()=>{o()}),new Promise(async(S,h)=>{var d;try{await i.subscribe("@oauth2",async R=>{var T;const j=i.clientId;try{if(!R.state||j!==R.state)throw new Error("State parameters don't match.");if(R.error||!R.code)throw new Error("OAuth2 redirect error or missing code: "+R.error);const A=Object.assign({},n);delete A.provider,delete A.scopes,delete A.createData,delete A.urlCallback,(T=g==null?void 0:g.signal)!=null&&T.onabort&&(g.signal.onabort=null);const J=await this.authWithOAuth2Code(f.name,R.code,f.codeVerifier,u,n.createData,A);S(J)}catch(A){h(new D(A))}o()});const U={state:i.clientId};(d=n.scopes)!=null&&d.length&&(U.scope=n.scopes.join(" "));const k=this._replaceQueryParams(f.authURL+u,U);await(n.urlCallback||function(R){s?s.location.href=R:s=Te(R)})(k)}catch(U){o(),h(new D(U))}})}).catch(l=>{throw o(),l})}async authRefresh(e,n){let s={method:"POST"};return s=x("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",s,e,n),this.client.send(this.baseCollectionPath+"/auth-refresh",s).then(i=>this.authResponse(i))}async requestPasswordReset(e,n,s){let i={method:"POST",body:{email:e}};return i=x("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,n,s),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}async confirmPasswordReset(e,n,s,i,o){let r={method:"POST",body:{token:e,password:n,passwordConfirm:s}};return r=x("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",r,i,o),this.client.send(this.baseCollectionPath+"/confirm-password-reset",r).then(()=>!0)}async requestVerification(e,n,s){let i={method:"POST",body:{email:e}};return i=x("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,n,s),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}async confirmVerification(e,n,s){let i={method:"POST",body:{token:e}};return i=x("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,n,s),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>{const o=X(e),r=this.client.authStore.record;return r&&!r.verified&&r.id===o.id&&r.collectionId===o.collectionId&&(r.verified=!0,this.client.authStore.save(this.client.authStore.token,r)),!0})}async requestEmailChange(e,n,s){let i={method:"POST",body:{newEmail:e}};return i=x("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,n,s),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}async confirmEmailChange(e,n,s,i){let o={method:"POST",body:{token:e,password:n}};return o=x("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",o,s,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",o).then(()=>{const r=X(e),a=this.client.authStore.record;return a&&a.id===r.id&&a.collectionId===r.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(e,n){return this.client.collection("_externalAuths").getFullList(Object.assign({},n,{filter:this.client.filter("recordRef = {:id}",{id:e})}))}async unlinkExternalAuth(e,n,s){const i=await this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:e,provider:n}));return this.client.collection("_externalAuths").delete(i.id,s).then(()=>!0)}async requestOTP(e,n){return n=Object.assign({method:"POST",body:{email:e}},n),this.client.send(this.baseCollectionPath+"/request-otp",n)}async authWithOTP(e,n,s){return s=Object.assign({method:"POST",body:{otpId:e,password:n}},s),this.client.send(this.baseCollectionPath+"/auth-with-otp",s).then(i=>this.authResponse(i))}async impersonate(e,n,s){(s=Object.assign({method:"POST",body:{duration:n}},s)).headers=s.headers||{},s.headers.Authorization||(s.headers.Authorization=this.client.authStore.token);const i=new Ke(this.client.baseURL,new ve,this.client.lang),o=await i.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(e),s);return i.authStore.save(o==null?void 0:o.token,this.decode((o==null?void 0:o.record)||{})),i}_replaceQueryParams(e,n={}){let s=e,i="";e.indexOf("?")>=0&&(s=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const o={},r=i.split("&");for(const a of r){if(a=="")continue;const l=a.split("=");o[decodeURIComponent(l[0].replace(/\+/g," "))]=decodeURIComponent((l[1]||"").replace(/\+/g," "))}for(let a in n)n.hasOwnProperty(a)&&(n[a]==null?delete o[a]:o[a]=n[a]);i="";for(let a in o)o.hasOwnProperty(a)&&(i!=""&&(i+="&"),i+=encodeURIComponent(a.replace(/%20/g,"+"))+"="+encodeURIComponent(o[a].replace(/%20/g,"+")));return i!=""?s+"?"+i:s}}function Te(t){if(typeof window>"u"||!(window!=null&&window.open))throw new D(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,n=768,s=window.innerWidth,i=window.innerHeight;e=e>s?s:e,n=n>i?i:n;let o=s/2-e/2,r=i/2-n/2;return window.open(t,"popup_window","width="+e+",height="+n+",top="+r+",left="+o+",resizable,menubar=no")}class Ht extends Me{get baseCrudPath(){return"/api/collections"}async import(e,n=!1,s){return s=Object.assign({method:"PUT",body:{collections:e,deleteMissing:n}},s),this.client.send(this.baseCrudPath+"/import",s).then(()=>!0)}async getScaffolds(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/meta/scaffolds",e)}async truncate(e,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/truncate",n).then(()=>!0)}}class Qt extends M{async getList(e=1,n=30,s){return(s=Object.assign({method:"GET"},s)).query=Object.assign({page:e,perPage:n},s.query),this.client.send("/api/logs",s)}async getOne(e,n){if(!e)throw new D({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return n=Object.assign({method:"GET"},n),this.client.send("/api/logs/"+encodeURIComponent(e),n)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class Yt extends M{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Xt extends M{getUrl(e,n,s={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(e,n,s)}getURL(e,n,s={}){if(!n||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(n));let o=this.client.buildURL(i.join("/"));if(Object.keys(s).length){s.download===!1&&delete s.download;const r=new URLSearchParams(s);o+=(o.includes("?")?"&":"?")+r}return o}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(n=>(n==null?void 0:n.token)||"")}}class Zt extends M{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,n){return n=Object.assign({method:"POST",body:{name:e}},n),this.client.send("/api/backups",n).then(()=>!0)}async upload(e,n){return n=Object.assign({method:"POST",body:e},n),this.client.send("/api/backups/upload",n).then(()=>!0)}async delete(e,n){return n=Object.assign({method:"DELETE"},n),this.client.send(`/api/backups/${encodeURIComponent(e)}`,n).then(()=>!0)}async restore(e,n){return n=Object.assign({method:"POST"},n),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,n).then(()=>!0)}getDownloadUrl(e,n){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(e,n)}getDownloadURL(e,n){return this.client.buildURL(`/api/backups/${encodeURIComponent(n)}?token=${encodeURIComponent(e)}`)}}class _t extends M{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/crons",e)}async run(e,n){return n=Object.assign({method:"POST"},n),this.client.send(`/api/crons/${encodeURIComponent(e)}`,n).then(()=>!0)}}function be(t){return typeof Blob<"u"&&t instanceof Blob||typeof File<"u"&&t instanceof File||t!==null&&typeof t=="object"&&t.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function ye(t){return t&&(t.constructor.name==="FormData"||typeof FormData<"u"&&t instanceof FormData)}function qe(t){for(const e in t){const n=Array.isArray(t[e])?t[e]:[t[e]];for(const s of n)if(be(s))return!0}return!1}const en=/^[\-\.\d]+$/;function Ee(t){if(typeof t!="string")return t;if(t=="true")return!0;if(t=="false")return!1;if((t[0]==="-"||t[0]>="0"&&t[0]<="9")&&en.test(t)){let e=+t;if(""+e===t)return e}return t}class tn extends M{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new nn(this.requests,e)),this.subs[e]}async send(e){const n=new FormData,s=[];for(let i=0;i<this.requests.length;i++){const o=this.requests[i];if(s.push({method:o.method,url:o.url,headers:o.headers,body:o.json}),o.files)for(let r in o.files){const a=o.files[r]||[];for(let l of a)n.append("requests."+i+"."+r,l)}}return n.append("@jsonPayload",JSON.stringify({requests:s})),e=Object.assign({method:"POST",body:n},e),this.client.send("/api/batch",e)}}class nn{constructor(e,n){this.requests=[],this.requests=e,this.collectionIdOrName=n}upsert(e,n){n=Object.assign({body:e||{}},n);const s={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(s,n),this.requests.push(s)}create(e,n){n=Object.assign({body:e||{}},n);const s={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(s,n),this.requests.push(s)}update(e,n,s){s=Object.assign({body:n||{}},s);const i={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(i,s),this.requests.push(i)}delete(e,n){n=Object.assign({},n);const s={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(s,n),this.requests.push(s)}prepareRequest(e,n){if(we(n),e.headers=n.headers,e.json={},e.files={},n.query!==void 0){const i=ze(n.query);i&&(e.url+=(e.url.includes("?")?"&":"?")+i)}let s=n.body;ye(s)&&(s=function(o){let r={};return o.forEach((a,l)=>{if(l==="@jsonPayload"&&typeof a=="string")try{let f=JSON.parse(a);Object.assign(r,f)}catch(f){console.warn("@jsonPayload error:",f)}else r[l]!==void 0?(Array.isArray(r[l])||(r[l]=[r[l]]),r[l].push(Ee(a))):r[l]=Ee(a)}),r}(s));for(const i in s){const o=s[i];if(be(o))e.files[i]=e.files[i]||[],e.files[i].push(o);else if(Array.isArray(o)){const r=[],a=[];for(const l of o)be(l)?r.push(l):a.push(l);if(r.length>0&&r.length==o.length){e.files[i]=e.files[i]||[];for(let l of r)e.files[i].push(l)}else if(e.json[i]=a,r.length>0){let l=i;i.startsWith("+")||i.endsWith("+")||(l+="+"),e.files[l]=e.files[l]||[];for(let f of r)e.files[l].push(f)}}else e.json[i]=o}}}class Ke{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e="/",n,s="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=s,n?this.authStore=n:typeof window<"u"&&window.Deno?this.authStore=new ve:this.authStore=new xt,this.collections=new Ht(this),this.files=new Xt(this),this.logs=new Qt(this),this.settings=new Wt(this),this.realtime=new Ve(this),this.health=new Yt(this),this.backups=new Zt(this),this.crons=new _t(this)}get admins(){return this.collection("_superusers")}createBatch(){return new tn(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Jt(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,n){if(!n)return e;for(let s in n){let i=n[s];switch(typeof i){case"boolean":case"number":i=""+i;break;case"string":i="'"+i.replace(/'/g,"\\'")+"'";break;default:i=i===null?"null":i instanceof Date?"'"+i.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(i).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+s+"}",i)}return e}getFileUrl(e,n,s={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(e,n,s)}buildUrl(e){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(e)}buildURL(e){var s;let n=this.baseURL;return typeof window>"u"||!window.location||n.startsWith("https://")||n.startsWith("http://")||(n=(s=window.location.origin)!=null&&s.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(n+=window.location.pathname||"/",n+=n.endsWith("/")?"":"/"),n+=this.baseURL),e&&(n+=n.endsWith("/")?"":"/",n+=e.startsWith("/")?e.substring(1):e),n}async send(e,n){n=this.initSendOptions(e,n);let s=this.buildURL(e);if(this.beforeSend){const i=Object.assign({},await this.beforeSend(s,n));i.url!==void 0||i.options!==void 0?(s=i.url||s,n=i.options||n):Object.keys(i).length&&(n=i,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(n.query!==void 0){const i=ze(n.query);i&&(s+=(s.includes("?")?"&":"?")+i),delete n.query}return this.getHeader(n.headers,"Content-Type")=="application/json"&&n.body&&typeof n.body!="string"&&(n.body=JSON.stringify(n.body)),(n.fetch||fetch)(s,n).then(async i=>{let o={};try{o=await i.json()}catch{}if(this.afterSend&&(o=await this.afterSend(i,o,n)),i.status>=400)throw new D({url:i.url,status:i.status,data:o});return o}).catch(i=>{throw new D(i)})}initSendOptions(e,n){if((n=Object.assign({method:"GET"},n)).body=function(i){if(typeof FormData>"u"||i===void 0||typeof i!="object"||i===null||ye(i)||!qe(i))return i;const o=new FormData;for(const r in i){const a=i[r];if(typeof a!="object"||qe({data:a})){const l=Array.isArray(a)?a:[a];for(let f of l)o.append(r,f)}else{let l={};l[r]=a,o.append("@jsonPayload",JSON.stringify(l))}}return o}(n.body),we(n),n.query=Object.assign({},n.params,n.query),n.requestKey===void 0&&(n.$autoCancel===!1||n.query.$autoCancel===!1?n.requestKey=null:(n.$cancelKey||n.query.$cancelKey)&&(n.requestKey=n.$cancelKey||n.query.$cancelKey)),delete n.$autoCancel,delete n.query.$autoCancel,delete n.$cancelKey,delete n.query.$cancelKey,this.getHeader(n.headers,"Content-Type")!==null||ye(n.body)||(n.headers=Object.assign({},n.headers,{"Content-Type":"application/json"})),this.getHeader(n.headers,"Accept-Language")===null&&(n.headers=Object.assign({},n.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(n.headers,"Authorization")===null&&(n.headers=Object.assign({},n.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&n.requestKey!==null){const s=n.requestKey||(n.method||"GET")+e;delete n.requestKey,this.cancelRequest(s);const i=new AbortController;this.cancelControllers[s]=i,n.signal=i.signal}return n}getHeader(e,n){e=e||{},n=n.toLowerCase();for(let s in e)if(s.toLowerCase()==n)return e[s];return null}}const sn={class:"grid grid-cols-3 gap-6"},rn={class:"col-span-1 max-w-lg"},on={class:"text-xl font-semibold mb-4"},an=["for"],ln={key:0,class:"text-red-500 mb-4"},un=["disabled"],cn={class:"col-span-2"},dn={__name:"CreateDrug",setup(t){const e=new Ke("https://mcq-db.dakakean.com"),n=V([]),s=V({id:"",brand:"",name:"",frequency:"",dose:"",when:"",duration:"",note:""}),i=V([]),o=V(!1),r=V(!1),a=V(""),l=()=>{s.value={id:"",brand:"",name:"",frequency:"",dose:"",when:"",duration:"",note:""},o.value=!1,n.value=[]},f=h=>h?h.split(`
`).filter(d=>d.trim()!==""):"",u=async()=>{try{const h=await e.collection("drugs").getFullList();i.value=h.map(d=>({id:d.id||"",name:d.name||"",brand:d.brand||"",frequency:d.frequency||"",dose:d.dose||"",when:d.when||"",duration:d.duration||"",note:d.note||""}))}catch(h){console.error("Error fetching drugs:",h)}},g=async()=>{r.value=!0,a.value="";const h={name:s.value.name,brand:f(s.value.brand),frequency:f(s.value.frequency),dose:f(s.value.dose),when:f(s.value.when),duration:f(s.value.duration),note:s.value.note};try{o.value?(await e.collection("drugs").update(s.value.id,h),console.log("Drug updated successfully.")):(await e.collection("drugs").create(h),console.log("Drug created successfully.")),l(),u()}catch(d){console.error("Error saving drug:",d),a.value=d.message||"Failed to save drug."}finally{r.value=!1}},p=h=>h?Array.isArray(h)?h.map(d=>d.trim()).join(`
`):typeof h=="string"?h.includes(",")?h.split(",").map(d=>d.trim()).join(`
`):h.trim():String(h):"",S=h=>{console.log(h),n.value.length===1?(o.value=!1,l()):(o.value=!0,s.value={id:h.id||"",name:p(h.name),brand:p(h.brand),frequency:p(h.frequency),dose:p(h.dose),when:p(h.when),duration:p(h.duration),note:p(h.note)})};return Le(u),(h,d)=>{const U=Xe,k=ft,I=Ft,R=Ze;return m(),W(R,{class:"my-10"},{default:ot(()=>[w("div",sn,[w("div",rn,[w("h1",on,L(B(o)?"Edit Drug":"Add New Drug"),1),w("form",{onSubmit:me(g,["prevent"])},[(m(),C(Q,null,_({name:"Name",brand:"Brand",frequency:"Frequency",dose:"Dose",when:"When to Take",duration:"Duration",note:"Note"},(j,T)=>w("div",{key:T,class:"form-group mb-4"},[w("label",{for:T,class:"block mb-2 text-sm font-medium text-gray-700"},L(j),9,an),T!=="name"?(m(),W(U,{key:0,autoresize:"",modelValue:B(s)[T],"onUpdate:modelValue":A=>B(s)[T]=A,id:T,class:"textarea",placeholder:`Enter ${j.toLowerCase()} (one per line)`},null,8,["modelValue","onUpdate:modelValue","id","placeholder"])):(m(),W(k,{key:1,modelValue:B(s)[T],"onUpdate:modelValue":A=>B(s)[T]=A,id:T,type:"text",class:"input",placeholder:`Enter ${j.toLowerCase()}`,required:""},null,8,["modelValue","onUpdate:modelValue","id","placeholder"]))])),64)),B(a)?(m(),C("div",ln,L(B(a)),1)):E("",!0),w("button",{type:"submit",class:"btn btn-primary",disabled:B(r)},L(B(r)?"Submitting...":B(o)?"Update Drug":"Create Drug"),9,un)],32)]),w("div",cn,[Y(I,{modelValue:B(n),"onUpdate:modelValue":d[0]||(d[0]=j=>at(n)?n.value=j:null),rows:B(i),class:"w-full border rounded","single-select":!0,onSelect:S},null,8,["modelValue","rows"])])])]),_:1})}}},hn=Z(dn,[["__scopeId","data-v-532a229b"]]),pn={};function fn(t,e){const n=hn;return m(),W(n)}const wn=Z(pn,[["render",fn]]);export{wn as default};
